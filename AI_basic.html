<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äººå·¥æ™ºèƒ½æ ¸å¿ƒè„‰ç»œäº¤äº’å¼æ¢ç´¢</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Harmony (Stone, Slate, Indigo) -->
    <!-- Application Structure Plan: A thematic, three-part structure is chosen over the report's linear chapter layout to enhance user exploration and understanding. The themes are "æ„å»ºæ™ºèƒ½ (Building Intelligence)", "å­¦ä¹ æ™ºèƒ½ (Learning Intelligence)", and "ç¤¾ä¼šæ™ºèƒ½ (Social Intelligence)", representing the major evolutionary paradigms of AI. This non-linear design, facilitated by a main navigation bar and dynamic content loading, allows users to freely jump between foundational concepts, modern learning methods, and future collaborative systems. Key interactions include side-by-side comparisons, step-by-step process visualizers, and interactive demos, which are designed to make abstract concepts like reasoning, search algorithms, and machine learning tangible and intuitive, thereby maximizing usability and knowledge retention. -->
    <!-- Visualization & Content Choices:
        1. Knowledge Rep. -> Goal: Compare -> Method: Tabbed content cards -> Interaction: Click tabs to reveal structured pros/cons and examples -> Justification: Allows direct, clutter-free comparison of abstract concepts. (HTML/CSS)
        2. Reasoning -> Goal: Demonstrate -> Method: Step-by-step animation for Resolution-Refutation & interactive chart for Fuzzy Logic -> Interaction: Click button for steps, drag slider for fuzzy logic -> Justification: Transforms complex logical processes into understandable visual sequences. (JS, Chart.js)
        3. Search -> Goal: Visualize & Compare -> Method: Animated grid search -> Interaction: Select algorithm, see animated search path and stats -> Justification: Clearly illustrates the efficiency differences between algorithms. (JS/Canvas drawing via divs)
        4. Optimization -> Goal: Visualize -> Method: Animated demos for Genetic Algorithm (string matching) and Particle Swarm (2D function optimization) -> Interaction: Start/reset animations, observe population/particle convergence -> Justification: Makes abstract optimization processes concrete and observable. (JS/CSS)
        5. ML -> Goal: Differentiate & Demonstrate -> Method: Interactive diagrams for ML types & animated K-Means clustering -> Interaction: Click to expand, set K value and run animation -> Justification: Provides both a high-level overview and a hands-on feel for how algorithms work. (HTML/CSS, JS/Canvas drawing via divs)
        6. Deep Learning -> Goal: Explain Architectures -> Method: Simplified, animated flow diagrams for CNN/LSTM/GAN -> Interaction: Click through steps to see data transformation or adversarial process -> Justification: De-mystifies the internal workings of complex models. (HTML/CSS, JS)
        7. Agents -> Goal: Compare & Explain -> Method: Card layout with flowcharts & animated coordination demo for Contract Net -> Interaction: Click to view details, watch animation of agent communication -> Justification: Effectively illustrates both agent theory and practical interaction protocols. (HTML/CSS, JS)
        Library/Method: Chart.js for charts, custom JS/CSS animations for all other visualizations. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Noto Sans SC', sans-serif; background-color: #f8fafc; }
        .nav-button { transition: all 0.3s ease; }
        .nav-button.active { background-color: #4338ca; color: white; }
        .nav-button:not(.active):hover { background-color: #e0e7ff; color: #312e81; }
        .content-card { background-color: white; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); transition: transform 0.3s ease, box-shadow 0.3s ease; overflow: hidden; }
        .content-card:hover { transform: translateY(-4px); box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -2px rgb(0 0 0 / 0.1); }
        .sub-nav-button { transition: background-color 0.2s, color 0.2s; }
        .sub-nav-button.active { background-color: #eef2ff; color: #3730a3; border-color: #4f46e5; }
        .interactive-area { border: 1px solid #e5e7eb; border-radius: 0.5rem; background-color: #f9fafb; }
        .grid-cell { width: 20px; height: 20px; border: 1px solid #e5e7eb; transition: background-color 0.3s ease; }
        .grid-cell.wall { background-color: #374151; }
        .grid-cell.start { background-color: #22c55e; }
        .grid-cell.end { background-color: #ef4444; }
        .grid-cell.visited { background-color: #a5b4fc; animation: pulse 0.7s; }
        .grid-cell.path { background-color: #facc15; animation: pulse 1s; }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        .pso-particle { position: absolute; width: 10px; height: 10px; border-radius: 50%; background-color: #4f46e5; transition: transform 0.5s linear; }
        .pso-pbest { position: absolute; width: 12px; height: 12px; border-radius: 50%; border: 2px solid #3b82f6; }
        .pso-gbest { position: absolute; width: 16px; height: 16px; border-radius: 50%; background-color: #f59e0b; animation: gbest-pulse 2s infinite; }
        .cluster-point { position: absolute; width: 8px; height: 8px; border-radius: 50%; transition: background-color 0.5s ease; }
        .cluster-centroid { position: absolute; width: 14px; height: 14px; transition: all 0.5s ease; border: 2px solid; }
        .agent { position: absolute; transition: all 0.5s ease-in-out; }
        .message-line { stroke-width: 2; animation: dash 5s linear infinite; }
        .bp-neuron, .dl-element { position: absolute; border: 2px solid; border-radius: 50%; transition: all 0.3s ease; }
        .bp-line, .dl-line { position: absolute; background-color: #9ca3af; transition: all 0.3s ease; transform-origin: 0 50%; }
        .anim-pulse { animation: anim-pulse-effect 0.5s; }
        @keyframes anim-pulse-effect { 0% { transform: scale(1); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }
        @keyframes gbest-pulse { 0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.7); } 50% { transform: scale(1.2); box-shadow: 0 0 0 10px rgba(245, 158, 11, 0); } }
        @keyframes pulse { 0% { transform: scale(0.8); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes dash { to { stroke-dashoffset: -100; } }
        .chart-container { position: relative; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; height: 300px; max-height: 40vh; }
        @media (min-width: 768px) { .chart-container { height: 350px; } }
    </style>
</head>
<body class="text-slate-800">

    <header class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <h1 class="text-xl md:text-2xl font-bold text-slate-900">
                <span class="text-indigo-600">AI</span> æ ¸å¿ƒè„‰ç»œäº¤äº’å¼æ¢ç´¢
            </h1>
            <nav id="main-nav" class="flex space-x-2 md:space-x-4">
            </nav>
        </div>
    </header>

    <main id="main-content" class="container mx-auto p-4 md:p-8">
    </main>

    <footer class="text-center py-6 text-slate-500 text-sm">
        <p>ä¸ºæ¢ç´¢äººå·¥æ™ºèƒ½æ ¸å¿ƒæ¦‚å¿µè€Œè®¾è®¡ã€‚æ‰€æœ‰å†…å®¹å‡åŸºäºæä¾›çš„æŠ¥å‘Šç”Ÿæˆã€‚</p>
    </footer>

<script>
const App = {
    data: {
        navigation: [
            { id: 'build', name: 'æ„å»ºæ™ºèƒ½', sections: [
                { id: 'knowledge', name: 'çŸ¥è¯†è¡¨ç¤º', renderFunc: 'renderKnowledge' },
                { id: 'reasoning', name: 'é€»è¾‘æ¨ç†', renderFunc: 'renderReasoning' },
                { id: 'search', name: 'æœç´¢ç­–ç•¥', renderFunc: 'renderSearch' },
                { id: 'optimization', name: 'æ™ºèƒ½ä¼˜åŒ–', renderFunc: 'renderOptimization' },
            ], intro: "æ­¤éƒ¨åˆ†æ¢ç´¢â€œå¤å…¸â€AIçš„åŸºçŸ³ï¼šå¦‚ä½•å°†äººç±»çŸ¥è¯†å½¢å¼åŒ–ï¼Œå¹¶åŸºäºè¿™äº›çŸ¥è¯†è¿›è¡Œé€»è¾‘æ¨ç†å’Œé—®é¢˜æ±‚è§£ã€‚æˆ‘ä»¬å°†æ·±å…¥äº†è§£ç¬¦å·ä¸»ä¹‰AIå¦‚ä½•é€šè¿‡ç²¾ç¡®çš„è§„åˆ™å’Œé«˜æ•ˆçš„æœç´¢ï¼Œå°è¯•ä»ç¬¬ä¸€æ€§åŸç†æ„å»ºæ™ºèƒ½ã€‚" },
            { id: 'learn', name: 'å­¦ä¹ æ™ºèƒ½', sections: [
                { id: 'ml', name: 'æœºå™¨å­¦ä¹ ', renderFunc: 'renderML' },
                { id: 'ann', name: 'ç¥ç»ç½‘ç»œ', renderFunc: 'renderANN' },
                { id: 'dl', name: 'æ·±åº¦å­¦ä¹ ', renderFunc: 'renderDL' },
            ], intro: "æ­¤éƒ¨åˆ†èšç„¦äºç°ä»£AIçš„æ ¸å¿ƒé©±åŠ¨åŠ›â€”â€”è¿æ¥ä¸»ä¹‰ã€‚æˆ‘ä»¬å°†æ¢è®¨æœºå™¨å¦‚ä½•ä¸å†ä¾èµ–äºäººç±»é¢„è®¾çš„è§„åˆ™ï¼Œè€Œæ˜¯ç›´æ¥ä»æ•°æ®ä¸­â€œå­¦ä¹ â€çŸ¥è¯†å’Œæ¨¡å¼ã€‚è¿™æ˜¯ä»â€œç¼–ç¨‹æ™ºèƒ½â€åˆ°â€œå­¦ä¹ æ™ºèƒ½â€çš„èŒƒå¼è·ƒè¿ã€‚" },
            { id: 'social', name: 'ç¤¾ä¼šæ™ºèƒ½', sections: [
                { id: 'agent', name: 'æ™ºèƒ½ä½“æ¶æ„', renderFunc: 'renderAgent' },
                { id: 'mas', name: 'å¤šæ™ºèƒ½ä½“ç³»ç»Ÿ', renderFunc: 'renderMAS' },
            ], intro: "å½“å•ä¸ªæ™ºèƒ½ä½“çš„èƒ½åŠ›è¾¾åˆ°æé™ï¼ŒAIçš„è§†é‡ä¾¿æ‹“å±•åˆ°ç¾¤ä½“ã€‚æ­¤éƒ¨åˆ†ç ”ç©¶èƒ½å¤Ÿè‡ªä¸»æ„ŸçŸ¥å’Œè¡ŒåŠ¨çš„â€œæ™ºèƒ½ä½“â€ï¼Œä»¥åŠå®ƒä»¬å¦‚ä½•ç»„æˆä¸€ä¸ªå¤æ‚çš„â€œæ™ºèƒ½ç¤¾ä¼šâ€ï¼Œé€šè¿‡é€šä¿¡ã€åè°ƒä¸åä½œï¼Œè§£å†³å•ä¸ªä¸ªä½“æ— æ³•å®Œæˆçš„å®å¤§é—®é¢˜ã€‚" }
        ],
        content: {
            knowledge: {
                title: "çŸ¥è¯†è¡¨ç¤ºï¼šæ™ºèƒ½çš„åŸºçŸ³",
                description: "çŸ¥è¯†è¡¨ç¤ºçš„æ ¸å¿ƒä»»åŠ¡æ˜¯å¦‚ä½•å°†äººç±»çš„çŸ¥è¯†å½¢å¼åŒ–ï¼Œä½¿å…¶èƒ½è¢«è®¡ç®—æœºå¤„ç†ã€‚è¿™å…¶ä¸­è•´å«ç€â€œè¡¨è¾¾èƒ½åŠ›â€ä¸â€œè®¡ç®—æ•ˆç‡â€ä¹‹é—´çš„æ°¸æ’æƒè¡¡ã€‚ä»¥ä¸‹æ˜¯ä¸‰ç§ä¸»æµçš„çŸ¥è¯†è¡¨ç¤ºæ–¹æ³•ã€‚",
                methods: [
                    { id: 'fol', name: 'ä¸€é˜¶è°“è¯é€»è¾‘', icon: 'âˆ€âˆƒ', summary: "ä¸€ç§ç²¾ç¡®ã€ä¸¥å¯†çš„é€šç”¨è¯­è¨€ï¼Œä½¿ç”¨è°“è¯ã€ä¸ªä½“ã€è¿æ¥è¯å’Œé‡è¯æ¥æè¿°äº‹å®å’Œè§„åˆ™ã€‚", example_title: "ç»å…¸ç¤ºä¾‹ï¼šè‹æ ¼æ‹‰åº•ä¸‰æ®µè®º", example: "`âˆ€x (Man(x) â†’ Mortal(x))` (å‡¡äººçš†æœ‰ä¸€æ­»)<br>`Man(Socrates)` (è‹æ ¼æ‹‰åº•æ˜¯äºº)<br>âŠ¢ `Mortal(Socrates)` (æ‰€ä»¥è‹æ ¼æ‹‰åº•ä¼šæ­»)", pros: ["è¡¨è¾¾èƒ½åŠ›æå¼ºï¼Œé€šç”¨æ€§å¥½", "é€»è¾‘åŸºç¡€åšå®ï¼Œæ¨ç†å¯é "], cons: ["è®¡ç®—å¤æ‚åº¦é«˜ï¼Œé€šç”¨æ¨ç†æ•ˆç‡ä½", "éš¾ä»¥è¡¨è¾¾ä¸ç¡®å®šæ€§å’Œå¸¸è¯†"] },
                    { id: 'prod', name: 'äº§ç”Ÿå¼è¡¨ç¤ºæ³•', icon: 'IF-THEN', summary: "ä½¿ç”¨ \"IF-THEN\" è§„åˆ™æ¥è¡¨ç¤ºçŸ¥è¯†ï¼Œå½¢å¼ç®€å•ç›´è§‚ï¼Œæ˜¯ä¸“å®¶ç³»ç»Ÿçš„æ ¸å¿ƒã€‚", example_title: "ç»å…¸ç¤ºä¾‹ï¼šåŠ¨ç‰©è¯†åˆ«è§„åˆ™", example: "`IF` è¯¥åŠ¨ç‰©æœ‰æ¯›å‘ `AND` æœ‰çˆª<br>`THEN` è¯¥åŠ¨ç‰©æ˜¯å“ºä¹³åŠ¨ç‰©<br>`WITH CF = 0.8`", pros: ["è´´è¿‘äººç±»æ€ç»´ï¼Œç›´è§‚æ˜“æ‡‚", "çŸ¥è¯†æ¨¡å—åŒ–ï¼Œæ˜“äºç»´æŠ¤å’Œè§£é‡Š"], cons: ["çŸ¥è¯†è·å–æ˜¯å·¨å¤§ç“¶é¢ˆ", "è¡¨è¾¾ç»“æ„åŒ–çŸ¥è¯†èƒ½åŠ›å¼±"] },
                    { id: 'frame', name: 'æ¡†æ¶è¡¨ç¤ºæ³•', icon: ' SLOT ', summary: "é€šè¿‡â€œæ§½(Slot)â€å’Œâ€œä¾§é¢(Facet)â€æ¥æè¿°å¯¹è±¡çš„å±æ€§ï¼Œå–„äºè¡¨è¾¾ç»“æ„æ€§çŸ¥è¯†å¹¶æ”¯æŒç»§æ‰¿ã€‚", example_title: "ç»å…¸ç¤ºä¾‹ï¼šæ•™å®¤æ¡†æ¶", example: "æ¡†æ¶: æ•™å®¤<br> `æ§½1: ä½ç½®` (å€¼: æ•™å­¦æ¥¼A-301)<br> `æ§½2: å®¹é‡` (é»˜è®¤å€¼: 50äºº)<br> `æ§½3: è®¾å¤‡` (IF-NEEDED: æ£€æŸ¥åº“å­˜)", pros: ["å–„äºè¡¨è¾¾ç»“æ„åŒ–ã€å±‚æ¬¡åŒ–çŸ¥è¯†", "é€šè¿‡é»˜è®¤å€¼å’Œç»§æ‰¿å®ç°é«˜æ•ˆæ¨ç†"], cons: ["å½¢å¼åŒ–ç¨‹åº¦ä¸å¦‚é€»è¾‘", "æ¨ç†èƒ½åŠ›ç›¸å¯¹æœ‰é™"] },
                ]
            },
            reasoning: {
                deterministic: { title: "ç¡®å®šæ€§æ¨ç†ï¼šå½’ç»“åæ¼”", description: "å½’ç»“åæ¼”æ˜¯ä¸€ç§é«˜æ•ˆçš„æœºå™¨æ¨ç†æ–¹æ³•ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯â€œåè¯æ³•â€ã€‚ä¸ºäº†è¯æ˜ä¸€ä¸ªç»“è®ºï¼Œæˆ‘ä»¬å…ˆå‡è®¾å…¶ä¸æˆç«‹ï¼Œç„¶åçœ‹æ˜¯å¦èƒ½ä»å‰æä¸­æ¨å¯¼å‡ºçŸ›ç›¾ï¼ˆç©ºå­å¥NILï¼‰ã€‚å¦‚æœèƒ½ï¼Œåˆ™åŸç»“è®ºæˆç«‹ã€‚", steps: [ { title: '1. å‰æä¸å¾…è¯ç»“è®º', content: 'å‰æ1: `âˆ€x (Man(x) â†’ Mortal(x))` (å‡¡äººçš†æœ‰ä¸€æ­»)<br>å‰æ2: `Man(Socrates)` (è‹æ ¼æ‹‰åº•æ˜¯äºº)<br><b>å¾…è¯ç»“è®º: `Mortal(Socrates)`</b>' }, { title: '2. å¦å®šç»“è®º', content: 'å°†å¾…è¯ç»“è®ºå¦å®šï¼Œå¹¶åŠ å…¥çŸ¥è¯†åº“ã€‚<br><b>æ–°äº‹å®: `Â¬Mortal(Socrates)`</b>' }, { title: '3. è½¬æ¢ä¸ºå­å¥é›†', content: 'å°†æ‰€æœ‰çŸ¥è¯†è½¬æ¢ä¸ºæ ‡å‡†çš„å­å¥èŒƒå¼ã€‚<br>å­å¥1: `Â¬Man(x) âˆ¨ Mortal(x)`<br>å­å¥2: `Man(Socrates)`<br>å­å¥3: `Â¬Mortal(Socrates)`' }, { title: '4. ç¬¬ä¸€æ¬¡å½’ç»“', content: 'å°†å­å¥1ä¸å­å¥2è¿›è¡Œå½’ç»“ï¼Œé€šè¿‡åˆä¸€ `{Socrates/x}` æ¶ˆè§£ `Man` é¡¹ã€‚<br><b>æ–°å­å¥4: `Mortal(Socrates)`</b>' }, { title: '5. ç¬¬äºŒæ¬¡å½’ç»“', content: 'å°†æ–°å­å¥4ä¸å­å¥3è¿›è¡Œå½’ç»“ã€‚<br>`Mortal(Socrates)` ä¸ `Â¬Mortal(Socrates)` äº’è¡¥ã€‚' }, { title: '6. å¯¼å‡ºçŸ›ç›¾ï¼Œè¯æ˜æˆåŠŸ', content: 'å½’ç»“ç»“æœä¸º<b>ç©ºå­å¥ (NIL)</b>ï¼Œä»£è¡¨é€»è¾‘çŸ›ç›¾ã€‚<br>å› æ­¤ï¼Œæœ€åˆçš„â€œå¦å®šç»“è®ºâ€å‡è®¾é”™è¯¯ï¼ŒåŸç»“è®ºâ€œè‹æ ¼æ‹‰åº•ä¼šæ­»â€æˆç«‹ã€‚' } ] },
                uncertain: { title: "ä¸ç¡®å®šæ€§æ¨ç†ï¼šæ¨¡ç³Šé€»è¾‘æ§åˆ¶å™¨", description: "æ¨¡ç³Šé€»è¾‘ç”¨äºå¤„ç†â€œçƒ­â€ã€â€œå†·â€ç­‰æ¨¡ç³Šæ¦‚å¿µã€‚å®ƒé€šè¿‡éš¶å±åº¦å‡½æ•°å°†ç²¾ç¡®è¾“å…¥â€œæ¨¡ç³ŠåŒ–â€ï¼ŒåŸºäºæ¨¡ç³Šè§„åˆ™è¿›è¡Œæ¨ç†ï¼Œæœ€åå°†æ¨¡ç³Šè¾“å‡ºâ€œå»æ¨¡ç³ŠåŒ–â€ä¸ºç²¾ç¡®æ§åˆ¶æŒ‡ä»¤ã€‚è¯·æ‹–åŠ¨ä¸‹æ–¹æ»‘å—ä½“éªŒã€‚", }
            },
            search: {
                title: "æœç´¢æ±‚è§£ç­–ç•¥",
                description: "AIå°†é—®é¢˜æ±‚è§£çœ‹ä½œåœ¨â€œçŠ¶æ€ç©ºé—´â€ä¸­å¯»æ‰¾ä»åˆå§‹çŠ¶æ€åˆ°ç›®æ ‡çŠ¶æ€çš„è·¯å¾„ã€‚ä¸åŒçš„æœç´¢ç­–ç•¥åœ¨å®Œå¤‡æ€§ã€æœ€ä¼˜æ€§å’Œæ—¶ç©ºæ•ˆç‡ä¸Šå„æœ‰æƒè¡¡ã€‚è¯·åœ¨ä¸‹æ–¹ç½‘æ ¼ä¸­è®¾ç½®èµ·ç‚¹å’Œç»ˆç‚¹ï¼Œç„¶åé€‰æ‹©ç®—æ³•è¿›è¡Œå¯è§†åŒ–æ¯”è¾ƒã€‚",
                algorithms: [ {id: 'bfs', name: 'å®½åº¦ä¼˜å…ˆæœç´¢ (BFS)', description: 'é€å±‚æ‰©å±•ï¼Œä¿è¯æ‰¾åˆ°æœ€çŸ­è·¯å¾„ï¼Œä½†ç©ºé—´å¼€é”€å¤§ã€‚'}, {id: 'dfs', name: 'æ·±åº¦ä¼˜å…ˆæœç´¢ (DFS)', description: 'ä¸€è·¯åˆ°åº•å†å›æº¯ï¼Œç©ºé—´å¼€é”€å°ï¼Œä½†ä¸ä¿è¯æœ€ä¼˜ã€‚'}, {id: 'astar', name: 'A* ç®—æ³•', description: 'ç»“åˆå®é™…ä»£ä»·å’Œå¯å‘å¼ä¼°è®¡ï¼Œæ˜¯æœ€é«˜æ•ˆçš„æœ€ä¼˜è·¯å¾„æœç´¢ç®—æ³•ä¹‹ä¸€ã€‚'} ]
            },
            optimization: {
                title: "æ™ºèƒ½è®¡ç®—ï¼šæºäºè‡ªç„¶çš„ä¼˜åŒ–å“²å­¦",
                description: "å½“é—®é¢˜è§£ç©ºé—´è¿‡äºåºå¤§å¤æ‚æ—¶ï¼Œæºäºè‡ªç„¶ç•Œæ™ºæ…§çš„å…ƒå¯å‘å¼ç®—æ³•æä¾›äº†å¼ºå¤§çš„å…¨å±€ä¼˜åŒ–å·¥å…·ã€‚å®ƒä»¬ä¸ä¿è¯æ‰¾åˆ°ç»å¯¹æœ€ä¼˜è§£ï¼Œä½†æ“…é•¿åœ¨å¯æ¥å—çš„æ—¶é—´å†…æ‰¾åˆ°é«˜è´¨é‡çš„è¿‘ä¼¼è§£ã€‚",
                methods: [
                    { id: 'ga', name: "é—ä¼ ç®—æ³• (GA)", description: "æ¨¡æ‹Ÿè¾¾å°”æ–‡è¿›åŒ–è®ºï¼Œé€šè¿‡â€œé€‰æ‹©ã€äº¤å‰ã€å˜å¼‚â€æ“ä½œï¼Œä½¿é—®é¢˜çš„è§£ï¼ˆç§ç¾¤ï¼‰ä¸æ–­è¿›åŒ–ï¼Œæœ€ç»ˆé€¼è¿‘æœ€ä¼˜è§£ã€‚" },
                    { id: 'pso', name: "ç²’å­ç¾¤ä¼˜åŒ– (PSO)", description: "æ¨¡æ‹Ÿé¸Ÿç¾¤è§…é£Ÿï¼Œæ¯ä¸ªè§£ï¼ˆç²’å­ï¼‰é€šè¿‡è¿½éšâ€œä¸ªä½“æœ€ä¼˜â€å’Œâ€œå…¨å±€æœ€ä¼˜â€æ¥æ›´æ–°è‡ªèº«ä½ç½®ï¼Œåœ¨è§£ç©ºé—´ä¸­æœç´¢ã€‚" },
                    { id: 'aco', name: "èšç¾¤ä¼˜åŒ– (ACO)", description: "æ¨¡æ‹Ÿèš‚èšé€šè¿‡ä¿¡æ¯ç´ å¯»æ‰¾æœ€çŸ­è·¯å¾„ã€‚è·¯å¾„è¶Šå¥½ï¼Œä¿¡æ¯ç´ æµ“åº¦è¶Šé«˜ï¼Œå½¢æˆæ­£åé¦ˆï¼Œæœ€ç»ˆæ‰¾åˆ°æœ€ä¼˜è·¯å¾„ã€‚" }
                ]
            },
            ml: {
                title: "æœºå™¨å­¦ä¹ åŸºç¡€",
                description: "æœºå™¨å­¦ä¹ ä½¿è®¡ç®—æœºæ— éœ€æ˜¾å¼ç¼–ç¨‹å°±èƒ½ä»æ•°æ®ä¸­å­¦ä¹ ã€‚æ ¹æ®å­¦ä¹ æ–¹å¼çš„ä¸åŒï¼Œä¸»è¦åˆ†ä¸ºä¸‰å¤§èŒƒå¼ã€‚",
                paradigms: [
                    { name: "æœ‰ç›‘ç£å­¦ä¹ ", description: "ä»â€œæœ‰æ ‡ç­¾â€çš„æ•°æ® (è¾“å…¥, æ­£ç¡®è¾“å‡º) ä¸­å­¦ä¹ æ˜ å°„å…³ç³»ï¼Œç”¨äºåˆ†ç±»å’Œå›å½’ã€‚", icon: "ğŸ·ï¸" },
                    { name: "æ— ç›‘ç£å­¦ä¹ ", description: "ä»â€œæ— æ ‡ç­¾â€çš„æ•°æ®ä¸­å‘ç°éšè—çš„ç»“æ„æˆ–æ¨¡å¼ï¼Œå¦‚èšç±»å’Œé™ç»´ã€‚", icon: "ğŸ¨" },
                    { name: "å¼ºåŒ–å­¦ä¹ ", description: "æ™ºèƒ½ä½“é€šè¿‡ä¸ç¯å¢ƒâ€œè¯•é”™â€äº¤äº’ï¼Œå­¦ä¹ èƒ½æœ€å¤§åŒ–ç´¯ç§¯å¥–åŠ±çš„ç­–ç•¥ã€‚", icon: "ğŸ®" }
                ],
                kmeans: {
                    title: "K-å‡å€¼èšç±»å¯è§†åŒ–",
                    description: "K-Meansæ˜¯æœ€ç»å…¸çš„æ— ç›‘ç£èšç±»ç®—æ³•ã€‚å®ƒå°†æ•°æ®é›†è¿­ä»£åœ°åˆ’åˆ†ä¸ºKä¸ªç°‡ï¼Œä½¿å¾—ç°‡å†…ç‚¹å½¼æ­¤é è¿‘ï¼Œç°‡é—´ç‚¹å½¼æ­¤è¿œç¦»ã€‚è¯·ç‚¹å‡»åŒºåŸŸæ”¾ç½®æ•°æ®ç‚¹ï¼Œé€‰æ‹©Kå€¼åå¼€å§‹èšç±»ã€‚"
                }
            },
            ann: {
                title: "ç»å…¸äººå·¥ç¥ç»ç½‘ç»œ",
                description: "åœ¨æ·±åº¦å­¦ä¹ æ—¶ä»£ä¹‹å‰ï¼Œè¿™äº›ç»å…¸æ¨¡å‹ä¸ºè¿æ¥ä¸»ä¹‰çš„å¤å…´å¥ å®šäº†é‡è¦åŸºç¡€ã€‚",
                models: [
                    { id: 'bp', name: 'BPç¥ç»ç½‘ç»œ', description: 'é€šè¿‡è¯¯å·®åå‘ä¼ æ’­ç®—æ³•è®­ç»ƒçš„å¤šå±‚å‰é¦ˆç½‘ç»œï¼Œæ˜¯ç°ä»£ç¥ç»ç½‘ç»œçš„åŸºç¡€ã€‚' },
                    { id: 'hopfield', name: 'Hopfieldç½‘ç»œ', description: 'ä¸€ç§å¯ç”¨ä½œè”æƒ³è®°å¿†å’Œæ±‚è§£ä¼˜åŒ–é—®é¢˜çš„åé¦ˆå‹ç½‘ç»œã€‚' }
                ]
            },
            dl: {
                title: "æ ¸å¿ƒæ·±åº¦å­¦ä¹ æ¶æ„",
                description: "æ·±åº¦å­¦ä¹ é€šè¿‡å †å å¤§é‡ç½‘ç»œå±‚ï¼Œè‡ªåŠ¨å­¦ä¹ æ•°æ®çš„å±‚æ¬¡åŒ–ç‰¹å¾è¡¨ç¤ºï¼Œæ˜¯å½“å‰AIé©å‘½çš„æ ¸å¿ƒå¼•æ“ã€‚",
                models: [
                    { id: 'cnn', name: 'å·ç§¯ç¥ç»ç½‘ç»œ (CNN)', description: 'é€šè¿‡å·ç§¯ã€æ± åŒ–ç­‰æ“ä½œé«˜æ•ˆå¤„ç†å›¾åƒç­‰ç½‘æ ¼æ•°æ®ï¼Œåœ¨è®¡ç®—æœºè§†è§‰é¢†åŸŸå–å¾—å·¨å¤§æˆåŠŸã€‚' },
                    { id: 'rnn', name: 'å¾ªç¯ç¥ç»ç½‘ç»œ (RNN)', description: 'é€šè¿‡å¾ªç¯ç»“æ„å¤„ç†åºåˆ—æ•°æ®ï¼Œä½†åœ¨å¤„ç†é•¿åºåˆ—æ—¶é¢ä¸´æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚' },
                    { id: 'gan', name: 'ç”Ÿæˆå¯¹æŠ—ç½‘ç»œ (GAN)', description: 'é€šè¿‡ç”Ÿæˆå™¨ä¸åˆ¤åˆ«å™¨çš„å¯¹æŠ—åšå¼ˆï¼Œå­¦ä¹ ç”Ÿæˆä»¥å‡ä¹±çœŸçš„æ–°æ•°æ®ã€‚' }
                ]
            },
            agent: {
                title: "æ™ºèƒ½ä½“æ¶æ„",
                description: "æ™ºèƒ½ä½“çš„â€œå¤§è„‘â€å†³å®šäº†å®ƒå¦‚ä½•å°†æ„ŸçŸ¥è½¬åŒ–ä¸ºè¡ŒåŠ¨ã€‚ä¸åŒçš„æ¶æ„åæ˜ äº†ç¬¦å·ä¸»ä¹‰ä¸è¿æ¥ä¸»ä¹‰çš„ç»å…¸æ€æƒ³äº¤é”‹ã€‚",
                architectures: [
                    { name: "ååº”å¼", description: "åŸºäºé¢„è®¾çš„â€œåˆºæ¿€-ååº”â€è§„åˆ™ï¼Œå“åº”é€Ÿåº¦å¿«ï¼Œä½†ç¼ºä¹è§„åˆ’èƒ½åŠ›ã€‚", pros: ["å¿«é€Ÿ", "ç®€å•"], cons: ["çŸ­è§†", "åŠŸèƒ½æœ‰é™"]},
                    { name: "æ…æ€å¼ (BDI)", description: "åŸºäºâ€œä¿¡å¿µ-æ„¿æœ›-æ„å›¾â€æ¨¡å‹è¿›è¡Œæ˜¾å¼é€»è¾‘è§„åˆ’ï¼Œè¡Œä¸ºç†æ€§ï¼Œä½†å“åº”æ…¢ã€‚", pros: ["ç†æ€§", "å¯è§„åˆ’"], cons: ["ç¼“æ…¢", "è®¡ç®—æ˜‚è´µ"]},
                    { name: "æ··åˆå¼", description: "é€šå¸¸é‡‡ç”¨åˆ†å±‚ç»“æ„ï¼Œç»“åˆååº”å¼å’Œæ…æ€å¼çš„ä¼˜ç‚¹ï¼Œä»¥å¹³è¡¡å“åº”é€Ÿåº¦å’Œæ™ºèƒ½æ·±åº¦ã€‚", pros: ["å¹³è¡¡", "çµæ´»"], cons: ["è®¾è®¡å¤æ‚"]},
                ]
            },
            mas: {
                title: "å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼šæ„å»ºæ™ºèƒ½ç¤¾ä¼š",
                description: "å½“é—®é¢˜è¶…è¶Šå•ä¸ªæ™ºèƒ½ä½“çš„èƒ½åŠ›æ—¶ï¼Œå°±éœ€è¦ç”±å¤šä¸ªè‡ªä¸»æ™ºèƒ½ä½“é€šè¿‡é€šä¿¡ã€åè°ƒä¸åä½œï¼Œå…±åŒè§£å†³é—®é¢˜ã€‚",
                contract_net: {
                    title: "åˆåŒç½‘åè®® (Contract Net)",
                    description: "ä¸€ç§ç»å…¸çš„åè°ƒä¸ä»»åŠ¡åˆ†é…æœºåˆ¶ï¼Œæ¨¡æ‹Ÿäº†å¸‚åœºæ‹›æŠ•æ ‡è¿‡ç¨‹ã€‚ä¸€ä¸ªæ™ºèƒ½ä½“ï¼ˆç®¡ç†è€…ï¼‰å¹¿æ’­ä»»åŠ¡ï¼Œå…¶ä»–æ™ºèƒ½ä½“ï¼ˆç«æ ‡è€…ï¼‰æ ¹æ®è‡ªèº«èƒ½åŠ›è¿›è¡ŒæŠ•æ ‡ï¼Œç®¡ç†è€…é€‰æ‹©æœ€ä¼˜çš„ä¸­æ ‡è€…å¹¶æˆäºˆåˆåŒã€‚"
                }
            }
        },
        currentView: { main: 'build', sub: 'knowledge' },
        charts: {},
        timers: {}
    },

    init() {
        this.renderNav();
        this.navigateTo('build', 'knowledge');
    },

    clearTimers() {
        if (this.data.timers) {
            Object.values(this.data.timers).forEach(timer => clearInterval(timer));
        }
        this.data.timers = {};
    },

    renderNav() {
        const mainNav = document.getElementById('main-nav');
        mainNav.innerHTML = this.data.navigation.map(item => `
            <button id="nav-${item.id}" class="nav-button px-3 py-2 md:px-4 rounded-md text-sm md:text-base font-medium" onclick="App.navigateTo('${item.id}', null)">
                ${item.name}
            </button>
        `).join('');
    },

    navigateTo(mainId, subId) {
        this.clearTimers();
        const mainItem = this.data.navigation.find(item => item.id === mainId);
        if (!mainItem) return;

        this.data.currentView.main = mainId;
        this.data.currentView.sub = subId || mainItem.sections[0].id;

        document.querySelectorAll('#main-nav .nav-button').forEach(btn => btn.classList.remove('active'));
        document.getElementById(`nav-${mainId}`).classList.add('active');

        const renderFunc = mainItem.sections.find(s => s.id === this.data.currentView.sub).renderFunc;
        this[renderFunc]();
    },

    renderHeader(mainId, subId) {
        const mainItem = this.data.navigation.find(item => item.id === mainId);
        const subNavHtml = mainItem.sections.map(s => `
            <button id="sub-nav-${s.id}" class="sub-nav-button border-b-2 border-transparent px-3 py-2 text-sm font-medium text-slate-500 hover:text-indigo-600 hover:border-indigo-300" onclick="App.navigateTo('${mainId}', '${s.id}')">
                ${s.name}
            </button>
        `).join('');

        return `
            <div class="fade-in">
                <p class="text-indigo-600 font-semibold">${mainItem.name}</p>
                <p class="mt-2 text-slate-600 max-w-3xl">${mainItem.intro}</p>
                <div class="border-b border-slate-200 mt-6">
                    <nav class="-mb-px flex space-x-4 overflow-x-auto" aria-label="Tabs">
                        ${subNavHtml}
                    </nav>
                </div>
            </div>
        `;
    },

    updateActiveSubNav(subId) {
        document.querySelectorAll('.sub-nav-button').forEach(btn => btn.classList.remove('active'));
        const activeBtn = document.getElementById(`sub-nav-${subId}`);
        if(activeBtn) activeBtn.classList.add('active');
    },

    renderKnowledge() {
        const content = this.data.content.knowledge;
        const mainContent = document.getElementById('main-content');

        let methodsHtml = content.methods.map(method => `
            <div class="content-card p-6 flex flex-col">
                <div class="flex items-center space-x-4">
                    <div class="flex-shrink-0 w-12 h-12 rounded-lg bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold text-lg">${method.icon}</div>
                    <div>
                        <h3 class="text-lg font-bold text-slate-900">${method.name}</h3>
                        <p class="text-sm text-slate-500">${method.summary}</p>
                    </div>
                </div>
                <div class="mt-4 pt-4 border-t border-slate-200 flex-grow">
                    <h4 class="font-semibold text-sm text-slate-700">${method.example_title}</h4>
                    <div class="mt-2 p-3 rounded-md bg-slate-50 text-xs text-slate-600 font-mono">${method.example}</div>
                    <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                        <div>
                            <h5 class="font-semibold text-green-600">ä¼˜åŠ¿</h5>
                            <ul class="mt-1 list-disc list-inside text-slate-600 space-y-1">
                                ${method.pros.map(p => `<li>${p}</li>`).join('')}
                            </ul>
                        </div>
                        <div>
                            <h5 class="font-semibold text-red-600">å±€é™</h5>
                            <ul class="mt-1 list-disc list-inside text-slate-600 space-y-1">
                                ${method.cons.map(c => `<li>${c}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        `).join('');

        mainContent.innerHTML = `
            ${this.renderHeader('build', 'knowledge')}
            <div class="mt-8 fade-in">
                <h2 class="text-2xl font-bold text-slate-900">${content.title}</h2>
                <p class="mt-2 text-slate-600 max-w-3xl">${content.description}</p>
                <div class="mt-6 grid grid-cols-1 lg:grid-cols-3 gap-6">
                    ${methodsHtml}
                </div>
            </div>
        `;
        this.updateActiveSubNav('knowledge');
    },

    renderReasoning() {
        const detData = this.data.content.reasoning.deterministic;
        const uncData = this.data.content.reasoning.uncertain;
        const mainContent = document.getElementById('main-content');

        mainContent.innerHTML = `
            ${this.renderHeader('build', 'reasoning')}
            <div class="mt-8 grid grid-cols-1 lg:grid-cols-2 gap-8 fade-in">
                <div class="content-card p-6">
                    <h3 class="text-xl font-bold text-slate-900">${detData.title}</h3>
                    <p class="mt-2 text-slate-600 text-sm">${detData.description}</p>
                    <div id="resolution-visualizer" class="mt-4 space-y-3"></div>
                    <button id="resolution-btn" class="mt-4 w-full px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition" onclick="App.runResolution()">å¼€å§‹/é‡ç½®æ¨ç†</button>
                </div>
                <div class="content-card p-6">
                    <h3 class="text-xl font-bold text-slate-900">${uncData.title}</h3>
                    <p class="mt-2 text-slate-600 text-sm">${uncData.description}</p>
                    <div class="interactive-area mt-4 p-4">
                       <div class="chart-container">
                           <canvas id="fuzzyChart"></canvas>
                       </div>
                       <div class="mt-4">
                           <label for="temp-slider" class="block text-sm font-medium text-slate-700">è¾“å…¥æ¸©åº¦: <span id="temp-value" class="font-bold text-indigo-600">28</span>Â°C</label>
                           <input id="temp-slider" type="range" min="0" max="50" value="28" class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer">
                       </div>
                    </div>
                </div>
            </div>
        `;
        this.updateActiveSubNav('reasoning');
        this.initResolutionVisualizer();
        this.initFuzzyChart();
        document.getElementById('temp-slider').addEventListener('input', (e) => this.updateFuzzyChart(e.target.value));
    },

    initResolutionVisualizer() {
        this.resolutionState = {
            currentIndex: -1,
            steps: this.data.content.reasoning.deterministic.steps,
            container: document.getElementById('resolution-visualizer'),
        };
        this.resolutionState.container.innerHTML = `<div class="p-4 text-center text-slate-400">ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å§‹æ¨ç†è¿‡ç¨‹ã€‚</div>`;
    },

    runResolution() {
        const { steps, container } = this.resolutionState;
        this.resolutionState.currentIndex = (this.resolutionState.currentIndex + 1) % (steps.length + 1);

        if (this.resolutionState.currentIndex === 0) {
            container.innerHTML = '';
        }

        if (this.resolutionState.currentIndex < steps.length) {
            const step = steps[this.resolutionState.currentIndex];
            const stepEl = document.createElement('div');
            stepEl.className = 'p-4 border border-slate-200 rounded-md bg-white fade-in';
            stepEl.innerHTML = `
                <h4 class="font-semibold text-slate-800">${step.title}</h4>
                <p class="mt-1 text-sm text-slate-600 font-mono">${step.content}</p>
            `;
            container.appendChild(stepEl);
            document.getElementById('resolution-btn').innerText = 'ä¸‹ä¸€æ­¥';
        } else {
            this.initResolutionVisualizer();
            document.getElementById('resolution-btn').innerText = 'å¼€å§‹/é‡ç½®æ¨ç†';
        }
    },

    initFuzzyChart() {
        if (this.data.charts.fuzzyChart) this.data.charts.fuzzyChart.destroy();
        const ctx = document.getElementById('fuzzyChart').getContext('2d');
        const labels = Array.from({length: 51}, (_, i) => i);

        this.data.charts.fuzzyChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [
                    { label: 'å‡‰çˆ½', data: labels.map(x => this.fuzzyMembership(x, 0, 10, 20, 30)), borderColor: 'rgb(59, 130, 246)', borderWidth: 2, fill: false, tension: 0.1 },
                    { label: 'æ¸©æš–', data: labels.map(x => this.fuzzyMembership(x, 20, 25, 30, 35)), borderColor: 'rgb(245, 158, 11)', borderWidth: 2, fill: false, tension: 0.1 },
                    { label: 'ç‚çƒ­', data: labels.map(x => this.fuzzyMembership(x, 30, 40, 50, 50)), borderColor: 'rgb(239, 68, 68)', borderWidth: 2, fill: false, tension: 0.1 },
                    { label: 'é£æ‰‡è½¬é€Ÿ (æ¨¡ç³Šè¾“å‡º)', data: [], backgroundColor: 'rgba(79, 70, 229, 0.4)', borderColor: 'rgb(79, 70, 229)', borderWidth: 2, fill: true, steppped: true }
                ]
            },
            options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true, max: 1, title: { display: true, text: 'éš¶å±åº¦' } }, x: { title: { display: true, text: 'æ¸©åº¦ (Â°C) / è½¬é€Ÿ' } } }, plugins: { title: { display: true, text: 'æ¸©åº¦æ¨¡ç³Šé›†åˆä¸é£æ‰‡è½¬é€Ÿ' } } }
        });
        this.updateFuzzyChart(28);
    },

    fuzzyMembership(x, a, b, c, d) {
        if (x <= a || x >= d) return 0;
        if (x > a && x < b) return (x - a) / (b - a);
        if (x >= b && x <= c) return 1;
        if (x > c && x < d) return (d - x) / (d - c);
        return 0;
    },

    updateFuzzyChart(temp) {
        document.getElementById('temp-value').textContent = temp;
        const tempVal = parseFloat(temp);

        const coolness = this.fuzzyMembership(tempVal, 0, 10, 20, 30);
        const warmth = this.fuzzyMembership(tempVal, 20, 25, 30, 35);
        const hotness = this.fuzzyMembership(tempVal, 30, 40, 50, 50);
        const slowSpeed = coolness, mediumSpeed = warmth, fastSpeed = hotness;

        const outputFuzzySet = this.data.charts.fuzzyChart.data.labels.map(x => {
            const slowMembership = this.fuzzyMembership(x, 0, 10, 20, 30);
            const mediumMembership = this.fuzzyMembership(x, 25, 35, 45, 50);
            const fastMembership = this.fuzzyMembership(x, 40, 50, 60, 70);
            return Math.max(Math.min(slowSpeed, slowMembership), Math.min(mediumSpeed, mediumMembership), Math.min(fastSpeed, fastMembership));
        });

        this.data.charts.fuzzyChart.data.datasets[3].data = outputFuzzySet;
        this.data.charts.fuzzyChart.update('none');
    },

    renderSearch() {
        const content = this.data.content.search;
        const mainContent = document.getElementById('main-content');
        mainContent.innerHTML = `
            ${this.renderHeader('build', 'search')}
            <div class="mt-8 content-card p-6 fade-in">
                <h2 class="text-2xl font-bold text-slate-900">${content.title}</h2>
                <p class="mt-2 text-slate-600 max-w-4xl">${content.description}</p>
                <div class="mt-6 flex flex-col lg:flex-row gap-6">
                    <div id="search-grid-container" class="flex-grow flex justify-center items-center"></div>
                    <div class="w-full lg:w-64 flex-shrink-0">
                        <h3 class="font-bold text-lg">æ§åˆ¶é¢æ¿</h3>
                        <div class="mt-4 space-y-4">
                            <div>
                                <h4 class="font-semibold text-sm">é€‰æ‹©ç®—æ³•</h4>
                                <div id="algo-buttons" class="mt-2 grid grid-cols-3 gap-2">
                                    ${content.algorithms.map(a => `<button class="px-3 py-2 text-sm border rounded-md hover:bg-slate-100" onclick="App.runSearch('${a.id}')">${a.name}</button>`).join('')}
                                </div>
                            </div>
                             <div>
                                <h4 class="font-semibold text-sm">å›¾ä¾‹</h4>
                                <div class="mt-2 space-y-1 text-xs">
                                    <div class="flex items-center"><div class="w-4 h-4 rounded-full bg-green-500 mr-2"></div>èµ·ç‚¹</div>
                                    <div class="flex items-center"><div class="w-4 h-4 rounded-full bg-red-500 mr-2"></div>ç»ˆç‚¹</div>
                                    <div class="flex items-center"><div class="w-4 h-4 rounded-full bg-gray-700 mr-2"></div>éšœç¢ç‰©</div>
                                    <div class="flex items-center"><div class="w-4 h-4 rounded-full bg-indigo-200 mr-2"></div>å·²è®¿é—®</div>
                                    <div class="flex items-center"><div class="w-4 h-4 rounded-full bg-yellow-400 mr-2"></div>æœ€ç»ˆè·¯å¾„</div>
                                </div>
                            </div>
                            <div>
                                <button class="w-full px-4 py-2 bg-slate-600 text-white rounded-md hover:bg-slate-700" onclick="App.resetSearchGrid()">é‡ç½®ç½‘æ ¼</button>
                            </div>
                            <div id="search-stats" class="text-sm p-3 bg-slate-100 rounded-md"></div>
                        </div>
                    </div>
                </div>
            </div>`;
        this.updateActiveSubNav('search');
        this.initSearchGrid();
    },

    initSearchGrid() {
        this.searchGrid = { rows: 15, cols: 20, start: {r: 7, c: 3}, end: {r: 7, c: 16}, walls: new Set(), isDrawing: false, };
        const container = document.getElementById('search-grid-container');
        container.innerHTML = '';
        const table = document.createElement('div');
        table.className = 'grid gap-0';
        table.style.gridTemplateColumns = `repeat(${this.searchGrid.cols}, 20px)`;
        for (let r = 0; r < this.searchGrid.rows; r++) {
            for (let c = 0; c < this.searchGrid.cols; c++) {
                const cell = document.createElement('div');
                cell.id = `cell-${r}-${c}`;
                cell.className = 'grid-cell';
                if (r === this.searchGrid.start.r && c === this.searchGrid.start.c) cell.classList.add('start');
                else if (r === this.searchGrid.end.r && c === this.searchGrid.end.c) cell.classList.add('end');
                cell.addEventListener('mousedown', (e) => { e.preventDefault(); this.searchGrid.isDrawing = true; this.toggleWall(r, c); });
                cell.addEventListener('mouseenter', () => { if (this.searchGrid.isDrawing) this.toggleWall(r, c); });
                table.appendChild(cell);
            }
        }
        container.appendChild(table);
        document.body.addEventListener('mouseup', () => { this.searchGrid.isDrawing = false; });
        this.updateSearchStats('å‡†å¤‡å°±ç»ªã€‚');
    },

    toggleWall(r, c) {
        const key = `${r}-${c}`;
        const cell = document.getElementById(`cell-${r}-${c}`);
        if (!cell.classList.contains('start') && !cell.classList.contains('end')) {
            if (this.searchGrid.walls.has(key)) { this.searchGrid.walls.delete(key); cell.classList.remove('wall'); }
            else { this.searchGrid.walls.add(key); cell.classList.add('wall'); }
        }
    },

    resetSearchGrid() {
        this.searchGrid.walls.clear();
        for (let r = 0; r < this.searchGrid.rows; r++) {
            for (let c = 0; c < this.searchGrid.cols; c++) {
                 document.getElementById(`cell-${r}-${c}`).classList.remove('wall', 'visited', 'path');
            }
        }
        this.updateSearchStats('ç½‘æ ¼å·²é‡ç½®ã€‚');
    },

    updateSearchStats(message) { document.getElementById('search-stats').innerHTML = message; },

    async runSearch(algoId) {
        this.clearSearchPath();
        const { rows, cols, start, end, walls } = this.searchGrid;
        let openSet, cameFrom, costSoFar, visitedCount = 0;
        const animations = [];
        const getNeighbors = ({r, c}) => {
            const neighbors = [];
            [[0,1], [0,-1], [1,0], [-1,0]].forEach(([dr, dc]) => {
                const nr = r + dr, nc = c + dc;
                if (nr >= 0 && nr < rows && nc >= 0 && nc < cols && !walls.has(`${nr}-${nc}`)) {
                    neighbors.push({r: nr, c: nc});
                }
            });
            return neighbors;
        };
        const heuristic = (a, b) => Math.abs(a.r - b.r) + Math.abs(a.c - b.c);

        if (algoId === 'bfs') {
            openSet = [start]; cameFrom = {}; const visited = new Set([`${start.r}-${start.c}`]);
            while(openSet.length > 0) {
                const current = openSet.shift();
                if (current.r === end.r && current.c === end.c) break;
                visitedCount++; animations.push({r: current.r, c: current.c, type: 'visited'});
                for (const neighbor of getNeighbors(current)) {
                    const key = `${neighbor.r}-${neighbor.c}`;
                    if (!visited.has(key)) { visited.add(key); cameFrom[key] = current; openSet.push(neighbor); }
                }
            }
        } else if (algoId === 'dfs') {
            openSet = [start]; cameFrom = {}; const visited = new Set();
            while(openSet.length > 0) {
                const current = openSet.pop();
                const currentKey = `${current.r}-${current.c}`;
                if (visited.has(currentKey)) continue;
                visited.add(currentKey); visitedCount++; animations.push({r: current.r, c: current.c, type: 'visited'});
                if (current.r === end.r && current.c === end.c) break;
                const neighbors = getNeighbors(current).reverse();
                for (const neighbor of neighbors) {
                     const key = `${neighbor.r}-${neighbor.c}`;
                     if (!visited.has(key)) { cameFrom[key] = current; openSet.push(neighbor); }
                }
            }
        } else if (algoId === 'astar') {
            openSet = [{...start, f: heuristic(start, end)}]; cameFrom = {}; costSoFar = {[`${start.r}-${start.c}`]: 0};
            while(openSet.length > 0) {
                openSet.sort((a,b) => a.f - b.f);
                const current = openSet.shift();
                if (current.r === end.r && current.c === end.c) break;
                visitedCount++; animations.push({r: current.r, c: current.c, type: 'visited'});
                for (const neighbor of getNeighbors(current)) {
                    const newCost = costSoFar[`${current.r}-${current.c}`] + 1;
                    const neighborKey = `${neighbor.r}-${neighbor.c}`;
                    if (costSoFar[neighborKey] === undefined || newCost < costSoFar[neighborKey]) {
                        costSoFar[neighborKey] = newCost;
                        const priority = newCost + heuristic(neighbor, end);
                        openSet.push({...neighbor, f: priority}); cameFrom[neighborKey] = current;
                    }
                }
            }
        }

        for (let i = 0; i < animations.length; i++) {
            const {r, c} = animations[i];
            const cell = document.getElementById(`cell-${r}-${c}`);
            if (!cell.classList.contains('start') && !cell.classList.contains('end')) {
                setTimeout(() => cell.classList.add('visited'), i * 10);
            }
        }

        const path = []; let current = end;
        while (current && !(current.r === start.r && current.c === start.c)) {
            path.unshift(current); current = cameFrom[`${current.r}-${current.c}`];
        }

        for (let i = 0; i < path.length; i++) {
            const {r, c} = path[i];
            const cell = document.getElementById(`cell-${r}-${c}`);
            if (!cell.classList.contains('end')) {
                 setTimeout(() => cell.classList.add('path'), animations.length * 10 + i * 40);
            }
        }
        const pathLength = path.length > 0 ? path.length : 'N/A';
        this.updateSearchStats(`<b>${algoId.toUpperCase()} å®Œæˆ</b><br>è®¿é—®èŠ‚ç‚¹: ${visitedCount}<br>è·¯å¾„é•¿åº¦: ${pathLength}`);
    },

    clearSearchPath() {
        for (let r = 0; r < this.searchGrid.rows; r++) {
            for (let c = 0; c < this.searchGrid.cols; c++) {
                 document.getElementById(`cell-${r}-${c}`).classList.remove('visited', 'path');
            }
        }
    },

    renderOptimization() {
        const content = this.data.content.optimization;
        const mainContent = document.getElementById('main-content');
        mainContent.innerHTML = `
            ${this.renderHeader('build', 'optimization')}
            <div class="mt-8 fade-in">
                <h2 class="text-2xl font-bold text-slate-900">${content.title}</h2>
                <p class="mt-2 text-slate-600 max-w-3xl">${content.description}</p>
                <div class="mt-6 grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- GA Card -->
                    <div class="content-card p-6">
                        <h3 class="text-xl font-bold text-slate-900">é—ä¼ ç®—æ³• (GA) æ¼”ç¤º</h3>
                        <p class="mt-2 text-sm text-slate-600">æ¨¡æ‹Ÿå¯»æ‰¾ç›®æ ‡å­—ç¬¦ä¸² "HELLO WORLD" çš„è¿‡ç¨‹ã€‚</p>
                        <div class="interactive-area mt-4 p-4 font-mono">
                            <div>ç›®æ ‡: <span class="font-bold">HELLO WORLD</span></div>
                            <div class="mt-2">ä»£æ•°: <span id="ga-gen" class="font-bold">0</span></div>
                            <div class="mt-2">æœ€ä½³ä¸ªä½“: <span id="ga-best" class="font-bold"></span></div>
                            <div class="mt-2">å¹³å‡é€‚åº”åº¦: <span id="ga-avg-fitness" class="font-bold">0</span></div>
                            <div id="ga-population" class="mt-4 text-sm space-y-1 h-40 overflow-y-auto"></div>
                        </div>
                        <button id="ga-btn" class="mt-4 w-full px-4 py-2 bg-indigo-600 text-white rounded-md" onclick="App.toggleGA()">å¼€å§‹/æš‚åœ</button>
                    </div>
                    <!-- PSO Card -->
                    <div class="content-card p-6">
                        <h3 class="text-xl font-bold text-slate-900">ç²’å­ç¾¤ä¼˜åŒ– (PSO) æ¼”ç¤º</h3>
                        <p class="mt-2 text-sm text-slate-600">ç²’å­ç¾¤åœ¨äºŒç»´å‡½æ•°ï¼ˆä¸­å¿ƒä¸ºæœ€ä½ç‚¹ï¼‰çš„è§£ç©ºé—´ä¸­å¯»æ‰¾å…¨å±€æœ€ä¼˜è§£ï¼ˆé»„è‰²æ˜Ÿæ ‡ï¼‰ã€‚</p>
                        <div class="interactive-area mt-4 p-4 aspect-video relative" id="pso-container">
                        </div>
                        <button id="pso-btn" class="mt-4 w-full px-4 py-2 bg-indigo-600 text-white rounded-md" onclick="App.togglePSO()">å¼€å§‹/æš‚åœ</button>
                    </div>
                </div>
            </div>
        `;
        this.updateActiveSubNav('optimization');
        this.initGA();
        this.initPSO();
    },

    initGA() {
        this.gaState = {
            target: "HELLO WORLD",
            populationSize: 100,
            mutationRate: 0.01,
            population: [],
            generation: 0,
            bestIndividual: '',
            avgFitness: 0,
            isRunning: false,
        };
        const randomChar = () => {
            const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ ";
            return chars.charAt(Math.floor(Math.random() * chars.length));
        };
        for (let i = 0; i < this.gaState.populationSize; i++) {
            let genome = "";
            for (let j = 0; j < this.gaState.target.length; j++) {
                genome += randomChar();
            }
            this.gaState.population.push({genome: genome, fitness: 0});
        }
        this.updateGADisplay();
    },

    toggleGA() {
        this.gaState.isRunning = !this.gaState.isRunning;
        document.getElementById('ga-btn').innerText = this.gaState.isRunning ? 'æš‚åœ' : 'ç»§ç»­';
        if (this.gaState.isRunning) {
            this.data.timers.ga = setInterval(() => this.evolveGA(), 100);
        } else {
            clearInterval(this.data.timers.ga);
        }
    },

    evolveGA() {
        const { target, population, mutationRate } = this.gaState;

        let totalFitness = 0;
        population.forEach(p => {
            let score = 0;
            for(let i = 0; i < target.length; i++) {
                if (p.genome.charAt(i) === target.charAt(i)) {
                    score++;
                }
            }
            p.fitness = Math.pow(score / target.length, 2); // Square to favor better results
            totalFitness += p.fitness;
        });

        this.gaState.avgFitness = (totalFitness / population.length).toFixed(4);
        population.sort((a, b) => b.fitness - a.fitness);
        this.gaState.bestIndividual = population[0].genome;
        this.gaState.generation++;

        if (this.gaState.bestIndividual === target) {
            this.toggleGA();
        }

        const matingPool = [];
        population.forEach(p => {
            const n = Math.floor(p.fitness * 100);
            for (let i = 0; i < n; i++) {
                matingPool.push(p);
            }
        });

        const newPopulation = [];
        for (let i = 0; i < population.length; i++) {
            const parentA = matingPool[Math.floor(Math.random() * matingPool.length)];
            const parentB = matingPool[Math.floor(Math.random() * matingPool.length)];

            const midpoint = Math.floor(Math.random() * target.length);
            let childGenome = parentA.genome.substring(0, midpoint) + parentB.genome.substring(midpoint);

            let mutatedGenome = "";
            for (let j = 0; j < childGenome.length; j++) {
                if (Math.random() < mutationRate) {
                    const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ ";
                    mutatedGenome += chars.charAt(Math.floor(Math.random() * chars.length));
                } else {
                    mutatedGenome += childGenome.charAt(j);
                }
            }
            newPopulation.push({genome: mutatedGenome, fitness: 0});
        }
        this.gaState.population = newPopulation;
        this.updateGADisplay();
    },

    updateGADisplay() {
        document.getElementById('ga-gen').innerText = this.gaState.generation;
        document.getElementById('ga-best').innerText = this.gaState.bestIndividual;
        document.getElementById('ga-avg-fitness').innerText = this.gaState.avgFitness;
        const popEl = document.getElementById('ga-population');
        popEl.innerHTML = this.gaState.population.slice(0, 10).map(p => `<div>${p.genome}</div>`).join('');
    },

    initPSO() {
        const container = document.getElementById('pso-container');
        if (!container || container.clientWidth === 0) {
            setTimeout(() => this.initPSO(), 50);
            return;
        }

        const width = container.clientWidth;
        const height = container.clientHeight;
        const objectiveFunction = (x, y) => {
            const centerX = width / 2;
            const centerY = height / 2;
            return Math.sqrt(Math.pow(x - centerX, 2) + Math.pow(y - centerY, 2));
        };

        this.psoState = {
            numParticles: 30,
            particles: [],
            gBest: { pos: {x: 0, y: 0}, val: Infinity },
            isRunning: false,
            containerSize: { width, height },
            objectiveFunction: objectiveFunction
        };

        container.innerHTML = `<div class="pso-gbest" id="pso-gbest-marker"></div>`;

        for (let i = 0; i < this.psoState.numParticles; i++) {
            const pos = { x: Math.random() * width, y: Math.random() * height };
            const fitness = objectiveFunction(pos.x, pos.y);
            const particle = {
                pos: pos,
                vel: { x: (Math.random() - 0.5) * 10, y: (Math.random() - 0.5) * 10 },
                pBest: { pos: { ...pos }, val: fitness },
                el: document.createElement('div'),
                pBestEl: document.createElement('div')
            };
            particle.el.className = 'pso-particle';
            particle.pBestEl.className = 'pso-pbest';
            container.appendChild(particle.el);
            container.appendChild(particle.pBestEl);
            this.psoState.particles.push(particle);

            if (fitness < this.psoState.gBest.val) {
                this.psoState.gBest.val = fitness;
                this.psoState.gBest.pos = { ...pos };
            }
        }
        this.updatePSODisplay();
    },

    togglePSO() {
        this.psoState.isRunning = !this.psoState.isRunning;
        document.getElementById('pso-btn').innerText = this.psoState.isRunning ? 'æš‚åœ' : 'ç»§ç»­';
        if (this.psoState.isRunning) {
            this.data.timers.pso = setInterval(() => this.evolvePSO(), 100);
        } else {
            clearInterval(this.data.timers.pso);
        }
    },

    evolvePSO() {
        const { particles, gBest, containerSize, objectiveFunction } = this.psoState;
        const w = 0.5, c1 = 0.8, c2 = 0.9;

        particles.forEach(p => {
            const fitness = objectiveFunction(p.pos.x, p.pos.y);
            if (fitness < p.pBest.val) {
                p.pBest.val = fitness;
                p.pBest.pos = { ...p.pos };
            }
            if (fitness < gBest.val) {
                gBest.val = fitness;
                gBest.pos = { ...p.pos };
            }
        });

        particles.forEach(p => {
            const r1 = Math.random(), r2 = Math.random();
            p.vel.x = w * p.vel.x + c1 * r1 * (p.pBest.pos.x - p.pos.x) + c2 * r2 * (gBest.pos.x - p.pos.x);
            p.vel.y = w * p.vel.y + c1 * r1 * (p.pBest.pos.y - p.pos.y) + c2 * r2 * (gBest.pos.y - p.pos.y);
            p.pos.x += p.vel.x;
            p.pos.y += p.vel.y;

            p.pos.x = Math.max(0, Math.min(containerSize.width - 10, p.pos.x));
            p.pos.y = Math.max(0, Math.min(containerSize.height - 10, p.pos.y));
        });

        this.updatePSODisplay();
    },

    updatePSODisplay() {
        const { particles, gBest } = this.psoState;
        particles.forEach(p => {
            p.el.style.transform = `translate(${p.pos.x}px, ${p.pos.y}px)`;
            p.pBestEl.style.transform = `translate(${p.pBest.pos.x}px, ${p.pBest.pos.y}px)`;
        });
        const gBestEl = document.getElementById('pso-gbest-marker');
        if (gBest.val !== Infinity) {
            gBestEl.style.transform = `translate(${gBest.pos.x}px, ${gBest.pos.y}px)`;
        }
    },

    renderML() {
        const content = this.data.content.ml;
        const mainContent = document.getElementById('main-content');
        mainContent.innerHTML = `
            ${this.renderHeader('learn', 'ml')}
            <div class="mt-8 fade-in">
                <h2 class="text-2xl font-bold text-slate-900">${content.title}</h2>
                <p class="mt-2 text-slate-600 max-w-3xl">${content.description}</p>
                <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-6">
                    ${content.paradigms.map(p => `
                        <div class="content-card p-6 text-center">
                            <div class="text-4xl">${p.icon}</div>
                            <h3 class="mt-4 text-lg font-bold">${p.name}</h3>
                            <p class="mt-2 text-sm text-slate-500">${p.description}</p>
                        </div>
                    `).join('')}
                </div>
                <div class="mt-8 content-card p-6">
                    <h3 class="text-xl font-bold text-slate-900">${content.kmeans.title}</h3>
                    <p class="mt-2 text-sm text-slate-600">${content.kmeans.description}</p>
                    <div class="mt-4 flex flex-col md:flex-row gap-6">
                        <div id="kmeans-container" class="interactive-area flex-grow aspect-video relative bg-white cursor-pointer"></div>
                        <div class="w-full md:w-56 flex-shrink-0">
                            <label for="k-slider" class="font-semibold text-sm">é€‰æ‹©Kå€¼ (ç°‡çš„æ•°é‡): <span id="k-value" class="font-bold text-indigo-600">3</span></label>
                            <input type="range" id="k-slider" min="2" max="6" value="3" class="w-full mt-2">
                            <button class="mt-4 w-full px-4 py-2 bg-indigo-600 text-white rounded-md" onclick="App.runKMeans()">å¼€å§‹èšç±»</button>
                            <button class="mt-2 w-full px-4 py-2 bg-slate-600 text-white rounded-md" onclick="App.resetKMeans()">é‡ç½®æ•°æ®ç‚¹</button>
                            <div id="kmeans-status" class="mt-4 text-sm text-slate-500"></div>
                        </div>
                    </div>
                </div>
            </div>`;
        this.updateActiveSubNav('ml');
        this.initKMeans();
    },

    initKMeans() {
        this.kmeansState = {
            points: [],
            centroids: [],
            k: 3,
            colors: ['#ef4444', '#3b82f6', '#22c55e', '#f97316', '#a855f7', '#ec4899']
        };
        const container = document.getElementById('kmeans-container');
        container.addEventListener('click', (e) => {
            const rect = container.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            this.addKMeansPoint(x, y);
        });
        document.getElementById('k-slider').addEventListener('input', (e) => {
            this.kmeansState.k = parseInt(e.target.value);
            document.getElementById('k-value').innerText = this.kmeansState.k;
        });
    },

    addKMeansPoint(x, y) {
        const { points } = this.kmeansState;
        const container = document.getElementById('kmeans-container');
        const point = { x, y, cluster: -1, el: document.createElement('div') };
        point.el.className = 'cluster-point';
        point.el.style.transform = `translate(${x-4}px, ${y-4}px)`;
        point.el.style.backgroundColor = '#64748b'; // slate-500
        container.appendChild(point.el);
        points.push(point);
    },

    resetKMeans() {
        this.clearTimers();
        if (this.kmeansState) {
            const { points, centroids } = this.kmeansState;
            points.forEach(p => p.el.remove());
            centroids.forEach(c => c.el.remove());
            this.kmeansState.points = [];
            this.kmeansState.centroids = [];
        }
        const statusEl = document.getElementById('kmeans-status');
        if(statusEl) statusEl.innerText = '';
    },

    runKMeans() {
        this.clearTimers();
        const { k, points, centroids, colors } = this.kmeansState;
        const container = document.getElementById('kmeans-container');
        const width = container.clientWidth;
        const height = container.clientHeight;

        centroids.forEach(c => c.el.remove());
        this.kmeansState.centroids = [];

        for (let i = 0; i < k; i++) {
            const centroid = {
                x: Math.random() * width,
                y: Math.random() * height,
                el: document.createElement('div')
            };
            centroid.el.className = 'cluster-centroid';
            centroid.el.style.borderColor = colors[i];
            centroid.el.style.transform = `translate(${centroid.x-7}px, ${centroid.y-7}px) rotate(45deg)`;
            container.appendChild(centroid.el);
            centroids.push(centroid);
        }

        let iteration = 0;
        const iterate = () => {
            iteration++;
            document.getElementById('kmeans-status').innerText = `è¿­ä»£æ¬¡æ•°: ${iteration}`;

            let changed = false;
            points.forEach(p => {
                let minDist = Infinity;
                let newCluster = -1;
                centroids.forEach((c, i) => {
                    const dist = Math.sqrt(Math.pow(p.x - c.x, 2) + Math.pow(p.y - c.y, 2));
                    if (dist < minDist) {
                        minDist = dist;
                        newCluster = i;
                    }
                });
                if (p.cluster !== newCluster) {
                    changed = true;
                    p.cluster = newCluster;
                    p.el.style.backgroundColor = colors[p.cluster];
                }
            });

            const newCentroids = Array.from({ length: k }, () => ({ x: 0, y: 0, count: 0 }));
            points.forEach(p => {
                if(p.cluster !== -1) {
                    newCentroids[p.cluster].x += p.x;
                    newCentroids[p.cluster].y += p.y;
                    newCentroids[p.cluster].count++;
                }
            });
            centroids.forEach((c, i) => {
                if (newCentroids[i].count > 0) {
                    c.x = newCentroids[i].x / newCentroids[i].count;
                    c.y = newCentroids[i].y / newCentroids[i].count;
                } else {
                    // Re-initialize centroid for empty cluster
                    c.x = Math.random() * width;
                    c.y = Math.random() * height;
                }
                c.el.style.transform = `translate(${c.x-7}px, ${c.y-7}px) rotate(45deg)`;
            });

            if (!changed || iteration > 100) {
                clearInterval(this.data.timers.kmeans);
                document.getElementById('kmeans-status').innerText += ` (æ”¶æ•›!)`;
            }
        };

        this.data.timers.kmeans = setInterval(iterate, 500);
    },

    renderANN() {
        const content = this.data.content.ann;
        const mainContent = document.getElementById('main-content');
        mainContent.innerHTML = `
            ${this.renderHeader('learn', 'ann')}
             <div class="mt-8 fade-in">
                <h2 class="text-2xl font-bold text-slate-900">${content.title}</h2>
                <p class="mt-2 text-slate-600 max-w-3xl">${content.description}</p>
                <div class="mt-6 grid grid-cols-1 lg:grid-cols-2 gap-8">
                     <!-- BP Network Card -->
                    <div class="content-card p-6">
                        <h3 class="text-xl font-bold text-slate-900">BPç¥ç»ç½‘ç»œåŠ¨ç”»</h3>
                        <p class="mt-2 text-sm text-slate-600">å±•ç¤ºæ•°æ®å‰å‘ä¼ æ’­ï¼Œè®¡ç®—è¯¯å·®ï¼Œç„¶åè¯¯å·®åå‘ä¼ æ’­ä»¥æ›´æ–°æƒé‡çš„è¿‡ç¨‹ã€‚</p>
                        <div class="interactive-area mt-4 p-4 aspect-video relative" id="bp-container"></div>
                        <button class="mt-4 w-full px-4 py-2 bg-indigo-600 text-white rounded-md" onclick="App.runBPAnimation()">è¿è¡ŒåŠ¨ç”»</button>
                    </div>
                     <!-- Hopfield Network Card -->
                    <div class="content-card p-6">
                        <h3 class="text-xl font-bold text-slate-900">Hopfieldç½‘ç»œè”æƒ³è®°å¿†</h3>
                        <p class="mt-2 text-sm text-slate-600">ç½‘ç»œå·²è®°å¿†'H'å’Œ'O'ã€‚ç‚¹å‡»ä¸‹æ–¹ç½‘æ ¼åˆ¶é€ å™ªå£°ï¼Œç„¶åè§‚å¯Ÿç½‘ç»œå¦‚ä½•æ”¶æ•›åˆ°æœ€ç›¸ä¼¼çš„è®°å¿†æ¨¡å¼ã€‚</p>
                        <div class="interactive-area mt-4 p-4 flex justify-center items-center">
                            <div id="hopfield-grid" class="grid grid-cols-5 gap-1"></div>
                        </div>
                        <button class="mt-4 w-full px-4 py-2 bg-indigo-600 text-white rounded-md" onclick="App.runHopfield()">å¼€å§‹è”æƒ³</button>
                    </div>
                </div>
            </div>`;
        this.updateActiveSubNav('ann');
        this.initBP();
        this.initHopfield();
    },

    initBP() {
        const container = document.getElementById('bp-container');
        if (!container) return;
        container.innerHTML = '';
        const layers = [2, 3, 1]; // Input, Hidden, Output
        const neuronSize = 30;
        const containerWidth = container.clientWidth;
        const containerHeight = container.clientHeight;

        this.bpElements = { neurons: [], lines: [] };

        layers.forEach((numNeurons, layerIndex) => {
            const layerX = (containerWidth / (layers.length + 1)) * (layerIndex + 1);
            this.bpElements.neurons.push([]);
            for (let i = 0; i < numNeurons; i++) {
                const neuronY = (containerHeight / (numNeurons + 1)) * (i + 1);
                const neuron = document.createElement('div');
                neuron.className = 'bp-neuron';
                neuron.style.width = `${neuronSize}px`;
                neuron.style.height = `${neuronSize}px`;
                neuron.style.left = `${layerX - neuronSize/2}px`;
                neuron.style.top = `${neuronY - neuronSize/2}px`;
                neuron.style.borderColor = '#64748b';
                container.appendChild(neuron);
                this.bpElements.neurons[layerIndex].push(neuron);

                if (layerIndex > 0) {
                    this.bpElements.neurons[layerIndex - 1].forEach(prevNeuron => {
                        const prevX = parseFloat(prevNeuron.style.left) + neuronSize/2;
                        const prevY = parseFloat(prevNeuron.style.top) + neuronSize/2;
                        const dx = (layerX - neuronSize/2) - prevX;
                        const dy = (neuronY - neuronSize/2) - prevY;
                        const dist = Math.sqrt(dx*dx + dy*dy);
                        const angle = Math.atan2(dy, dx) * 180 / Math.PI;

                        const line = document.createElement('div');
                        line.className = 'bp-line';
                        line.style.width = `${dist}px`;
                        line.style.height = '2px';
                        line.style.left = `${prevX}px`;
                        line.style.top = `${prevY + neuronSize/2}px`;
                        line.style.transform = `rotate(${angle}deg)`;
                        container.insertBefore(line, container.firstChild);
                        this.bpElements.lines.push(line);
                    });
                }
            }
        });
    },
    runBPAnimation() {
        this.clearTimers();
        const { neurons, lines } = this.bpElements;
        let step = 0;
        const animate = (elements, color, duration) => {
            elements.forEach(el => {
                el.style.borderColor = color;
                el.style.backgroundColor = color.replace(')', ', 0.2)').replace('rgb', 'rgba');
                el.classList.add('anim-pulse');
            });
            setTimeout(() => {
                elements.forEach(el => {
                    el.style.borderColor = '#64748b';
                    el.style.backgroundColor = 'transparent';
                    el.classList.remove('anim-pulse');
                });
            }, duration);
        };
        const animateLines = (color, duration) => {
            lines.forEach(line => line.style.backgroundColor = color);
            setTimeout(() => lines.forEach(line => line.style.backgroundColor = '#9ca3af'), duration);
        };

        const sequence = [
            () => animate(neurons[0], 'rgb(34, 197, 94)', 500), // Forward pass start
            () => animate(neurons[1], 'rgb(59, 130, 246)', 500),
            () => animate(neurons[2], 'rgb(239, 68, 68)', 500), // Error
            () => animateLines('rgb(239, 68, 68)', 500), // Backward pass
            () => animate(neurons[1], 'rgb(239, 68, 68)', 500),
            () => animate(neurons[0], 'rgb(239, 68, 68)', 500),
        ];

        this.data.timers.bp = setInterval(() => {
            if (step < sequence.length) {
                sequence[step]();
                step++;
            } else {
                this.clearTimers();
            }
        }, 600);
    },
    initHopfield() {
        this.hopfieldState = {
            size: 5,
            grid: [],
            weights: null,
            patterns: [
                [ 1,-1,-1,-1, 1,  1,-1,-1,-1, 1,  1, 1, 1, 1, 1,  1,-1,-1,-1, 1,  1,-1,-1,-1, 1 ], // H
                [-1, 1, 1, 1,-1,  1,-1,-1,-1, 1,  1,-1,-1,-1, 1,  1,-1,-1,-1, 1, -1, 1, 1, 1,-1 ]  // O
            ]
        };
        const n = this.hopfieldState.size * this.hopfieldState.size;
        this.hopfieldState.weights = Array(n).fill(0).map(() => Array(n).fill(0));

        this.hopfieldState.patterns.forEach(p => {
            for(let i = 0; i < n; i++) {
                for(let j = 0; j < n; j++) {
                    if (i === j) continue;
                    this.hopfieldState.weights[i][j] += p[i] * p[j];
                }
            }
        });

        const gridEl = document.getElementById('hopfield-grid');
        gridEl.innerHTML = '';
        this.hopfieldState.grid = Array(n).fill(1); // Correctly initialize the grid
        for (let i = 0; i < n; i++) {
            const cell = document.createElement('div');
            cell.className = 'w-8 h-8 border cursor-pointer';
            cell.style.backgroundColor = 'white';
            cell.addEventListener('click', () => {
                this.hopfieldState.grid[i] *= -1;
                cell.style.backgroundColor = this.hopfieldState.grid[i] === 1 ? 'black' : 'white';
            });
            gridEl.appendChild(cell);
        }
    },
    runHopfield() {
        this.clearTimers();
        let iteration = 0;
        const n = this.hopfieldState.size * this.hopfieldState.size;
        this.data.timers.hopfield = setInterval(() => {
            const randomIndex = Math.floor(Math.random() * n);
            let sum = 0;
            for(let j = 0; j < n; j++) {
                sum += this.hopfieldState.weights[randomIndex][j] * this.hopfieldState.grid[j];
            }
            this.hopfieldState.grid[randomIndex] = sum >= 0 ? 1 : -1;

            this.updateHopfieldGrid();
            iteration++;
            if(iteration > n * 5) {
                this.clearTimers();
            }
        }, 50);
    },
    updateHopfieldGrid() {
        const cells = document.getElementById('hopfield-grid').children;
        for(let i = 0; i < cells.length; i++) {
            cells[i].style.backgroundColor = this.hopfieldState.grid[i] === 1 ? 'black' : 'white';
        }
    },

    renderDL() {
        const content = this.data.content.dl;
        const mainContent = document.getElementById('main-content');
        mainContent.innerHTML = `
            ${this.renderHeader('learn', 'dl')}
             <div class="mt-8 fade-in">
                <h2 class="text-2xl font-bold text-slate-900">${content.title}</h2>
                <p class="mt-2 text-slate-600 max-w-3xl">${content.description}</p>
                <div class="mt-6 grid grid-cols-1 lg:grid-cols-3 gap-6">
                    ${content.models.map(m => `
                         <div class="content-card p-6">
                            <h3 class="text-xl font-bold text-slate-900">${m.name}</h3>
                            <p class="mt-2 text-sm text-slate-500">${m.description}</p>
                            <div id="dl-container-${m.id}" class="mt-4 interactive-area p-4 aspect-square flex flex-col items-center justify-center text-slate-400 relative overflow-hidden">
                                 <div class="text-center">
                                    <p id="dl-status-${m.id}" class="h-8"></p>
                                    <button class="mt-2 px-3 py-1 bg-indigo-600 text-white text-sm rounded-md" onclick="App.runDLAnimation('${m.id}')">è¿è¡Œæ¼”ç¤º</button>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>
            `;
        this.updateActiveSubNav('dl');
    },
    runDLAnimation(modelId) {
        this.clearTimers();
        const container = document.getElementById(`dl-container-${modelId}`);
        const statusEl = document.getElementById(`dl-status-${modelId}`);
        container.querySelectorAll('.dl-element, .dl-line').forEach(el => el.remove());

        if (modelId === 'cnn') {
            // CNN Visualization
            statusEl.innerText = "è¾“å…¥å›¾åƒ";
            const input = document.createElement('div');
            input.className = 'dl-element grid grid-cols-5 gap-px p-1 bg-slate-400';
            input.style.width = '80px'; input.style.height = '80px';
            input.style.position = 'relative';
            for(let i=0; i<25; i++) input.innerHTML += `<div class="w-full h-full ${Math.random() > 0.5 ? 'bg-slate-800' : 'bg-slate-100'}"></div>`;
            container.appendChild(input);

            setTimeout(() => {
                statusEl.innerText = "å·ç§¯æ“ä½œ";
                const filter = document.createElement('div');
                filter.className = 'dl-element border-2 border-red-500 bg-red-500/20';
                filter.style.width = '32px'; filter.style.height = '32px';
                filter.style.position = 'absolute';
                filter.style.left = '4px'; filter.style.top = '4px';
                filter.style.transition = 'all 1s';
                input.appendChild(filter);
                setTimeout(() => { filter.style.left = '44px'; filter.style.top = '44px'; }, 500);
            }, 1000);
             setTimeout(() => {
                statusEl.innerText = "ç”Ÿæˆç‰¹å¾å›¾";
                input.style.opacity = '0';
                const featureMap = document.createElement('div');
                featureMap.className = 'dl-element grid grid-cols-3 gap-px p-1 bg-blue-400';
                featureMap.style.width = '50px'; featureMap.style.height = '50px';
                for(let i=0; i<9; i++) featureMap.innerHTML += `<div class="w-full h-full ${Math.random() > 0.5 ? 'bg-blue-800' : 'bg-blue-100'}"></div>`;
                container.appendChild(featureMap);
            }, 2500);
            setTimeout(() => { statusEl.innerText = "æ± åŒ–æ“ä½œ -> åˆ†ç±»"; }, 3500);

        } else if (modelId === 'rnn') {
            // RNN Visualization
            const words = ["AI", "æ”¹å˜", "ä¸–ç•Œ"];
            let currentX = 20;
            words.forEach((word, i) => {
                setTimeout(() => {
                    statusEl.innerText = `å¤„ç†è¾“å…¥: "${word}"`;
                    const wordEl = document.createElement('div');
                    wordEl.className = 'dl-element absolute border-slate-500 flex items-center justify-center';
                    wordEl.style.width = '60px'; wordEl.style.height = '40px';
                    wordEl.style.borderRadius = '0.25rem';
                    wordEl.style.top = '150px';
                    wordEl.style.left = `${currentX}px`;
                    wordEl.innerText = word;
                    wordEl.classList.add('anim-pulse');
                    container.appendChild(wordEl);
                    currentX += 70;
                }, i * 1500);
            });
            const rnnCell = document.createElement('div');
            rnnCell.innerText = 'RNN';
            rnnCell.className = 'dl-element absolute border-indigo-500 flex items-center justify-center font-bold';
            rnnCell.style.width = '80px'; rnnCell.style.height = '80px';
            rnnCell.style.top = '50px'; rnnCell.style.left = 'calc(50% - 40px)';
            container.appendChild(rnnCell);
            setTimeout(() => { statusEl.innerText = "å®Œæˆåºåˆ—å¤„ç†";}, words.length * 1500);

        } else if (modelId === 'gan') {
            // GAN Visualization
            const generator = document.createElement('div');
            generator.innerText = 'G';
            generator.className = 'dl-element absolute border-blue-500 flex items-center justify-center font-bold';
            generator.style.width = '60px'; generator.style.height = '60px';
            generator.style.top = '50%'; generator.style.left = '20px';
            generator.style.transform = 'translateY(-50%)';
            container.appendChild(generator);

            const discriminator = document.createElement('div');
            discriminator.innerText = 'D';
            discriminator.className = 'dl-element absolute border-red-500 flex items-center justify-center font-bold';
            discriminator.style.width = '60px'; discriminator.style.height = '60px';
            discriminator.style.top = '50%'; discriminator.style.right = '20px';
            discriminator.style.transform = 'translateY(-50%)';
            container.appendChild(discriminator);

            setTimeout(() => {
                statusEl.innerText = "ç”Ÿæˆå™¨ G äº§ç”Ÿå‡æ•°æ®";
                generator.classList.add('anim-pulse');
                const fakeData = document.createElement('div');
                fakeData.innerText = 'ğŸ–¼ï¸?';
                fakeData.className = 'dl-element absolute text-2xl';
                fakeData.style.top = '50%'; fakeData.style.left = '90px';
                fakeData.style.transform = 'translateY(-50%)';
                fakeData.style.transition = 'all 1s';
                container.appendChild(fakeData);
                setTimeout(() => { fakeData.style.left = 'calc(100% - 120px)'; }, 500);
            }, 500);
             setTimeout(() => {
                statusEl.innerText = "åˆ¤åˆ«å™¨ D åˆ¤åˆ«çœŸå‡";
                discriminator.classList.add('anim-pulse');
            }, 2000);
             setTimeout(() => {
                statusEl.innerText = "D: 'è¿™æ˜¯å‡çš„!' -> åå‘ä¼ æ’­";
                discriminator.style.backgroundColor = 'rgba(239, 68, 68, 0.2)';
            }, 3000);
             setTimeout(() => {
                statusEl.innerText = "G å’Œ D åŒæ—¶è¿›åŒ–";
                generator.style.backgroundColor = 'rgba(59, 130, 246, 0.2)';
            }, 4000);
        }
    },

    renderAgent() {
        const content = this.data.content.agent;
        const mainContent = document.getElementById('main-content');
        mainContent.innerHTML = `
            ${this.renderHeader('social', 'agent')}
            <div class="mt-8 fade-in">
                <h2 class="text-2xl font-bold text-slate-900">${content.title}</h2>
                <p class="mt-2 text-slate-600 max-w-3xl">${content.description}</p>
                 <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-6">
                    ${content.architectures.map(arch => `
                        <div class="content-card p-6 flex flex-col">
                            <h3 class="text-xl font-bold text-center text-slate-900">${arch.name}</h3>
                            <p class="mt-2 text-sm text-slate-500 text-center flex-grow">${arch.description}</p>
                            <div class="mt-4 pt-4 border-t border-slate-200">
                                <div class="text-sm font-semibold text-green-600">ä¼˜ç‚¹</div>
                                <div class="flex flex-wrap gap-2 mt-1">
                                    ${arch.pros.map(p => `<span class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full">${p}</span>`).join('')}
                                </div>
                                <div class="mt-3 text-sm font-semibold text-red-600">ç¼ºç‚¹</div>
                                <div class="flex flex-wrap gap-2 mt-1">
                                    ${arch.cons.map(c => `<span class="bg-red-100 text-red-800 text-xs font-medium px-2.5 py-0.5 rounded-full">${c}</span>`).join('')}
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>
            `;
        this.updateActiveSubNav('agent');
    },

    renderMAS() {
        const content = this.data.content.mas;
        const mainContent = document.getElementById('main-content');
        mainContent.innerHTML = `
            ${this.renderHeader('social', 'mas')}
             <div class="mt-8 fade-in content-card p-6">
                <h2 class="text-2xl font-bold text-slate-900">${content.title}</h2>
                <p class="mt-2 text-slate-600 max-w-3xl">${content.description}</p>
                <div class="mt-6">
                    <h3 class="text-xl font-bold text-slate-900">${content.contract_net.title}</h3>
                    <p class="mt-2 text-sm text-slate-600">${content.contract_net.description}</p>
                    <div id="mas-container" class="mt-4 interactive-area p-4 aspect-video relative overflow-hidden"></div>
                    <button class="mt-4 w-full px-4 py-2 bg-indigo-600 text-white rounded-md" onclick="App.runMASAnimation()">å¼€å§‹æ¼”ç¤º</button>
                    <div id="mas-log" class="mt-4 p-2 bg-slate-100 rounded-md text-xs font-mono h-24 overflow-y-auto"></div>
                </div>
            </div>`;
        this.updateActiveSubNav('mas');
        this.initMAS();
    },

    initMAS() {
        this.masState = {
            agents: [],
            manager: null
        };
        const container = document.getElementById('mas-container');
        const width = container.clientWidth;
        const height = container.clientHeight;

        // Manager agent
        this.masState.manager = { x: width / 2, y: 50, el: this.createAgentElement('M', 'bg-red-500') };
        container.appendChild(this.masState.manager.el);
        this.masState.manager.el.style.transform = `translate(${this.masState.manager.x - 20}px, ${this.masState.manager.y - 20}px)`;

        // Contractor agents
        for(let i=0; i < 5; i++) {
            const agent = {
                x: (width / 6) * (i + 1),
                y: height - 50,
                el: this.createAgentElement(`C${i+1}`, 'bg-blue-500')
            };
            this.masState.agents.push(agent);
            container.appendChild(agent.el);
            agent.el.style.transform = `translate(${agent.x - 20}px, ${agent.y - 20}px)`;
        }
    },
    createAgentElement(text, bgColor) {
        const el = document.createElement('div');
        el.className = `agent w-10 h-10 rounded-full text-white flex items-center justify-center font-bold shadow-lg ${bgColor}`;
        el.innerText = text;
        return el;
    },
    runMASAnimation() {
        this.clearTimers();
        const { manager, agents } = this.masState;
        const container = document.getElementById('mas-container');
        container.querySelector('svg')?.remove();
        const log = document.getElementById('mas-log');
        log.innerHTML = '';

        const logMessage = (msg) => {
            log.innerHTML += `<div>${new Date().toLocaleTimeString()}: ${msg}</div>`;
            log.scrollTop = log.scrollHeight;
        };

        const createMessageLine = (from, to, color) => {
            const svgNS = "http://www.w3.org/2000/svg";
            let svg = container.querySelector('svg');
            if(!svg) {
                svg = document.createElementNS(svgNS, "svg");
                svg.setAttribute('class', 'absolute top-0 left-0 w-full h-full');
                container.insertBefore(svg, container.firstChild);
            }
            const line = document.createElementNS(svgNS, 'line');
            line.setAttribute('x1', from.x);
            line.setAttribute('y1', from.y);
            line.setAttribute('x2', to.x);
            line.setAttribute('y2', to.y);
            line.setAttribute('stroke', color);
            line.classList.add('message-line');
            line.style.strokeDasharray = '5, 5';
            svg.appendChild(line);
            setTimeout(() => line.remove(), 1500);
        };

        let step = 0;
        const sequence = [
            () => { // Step 1: Call for proposals
                logMessage("ç®¡ç†è€… M: å¹¿æ’­ä»»åŠ¡æ‹›æ ‡ (CFP)...");
                agents.forEach(agent => createMessageLine(manager, agent, '#f87171')); // red-400
            },
            () => { // Step 2: Bidding
                logMessage("ç«æ ‡è€… C1-C5: æ”¶åˆ°CFP, æ­£åœ¨è¯„ä¼°...");
                setTimeout(() => {
                    logMessage("C1, C3, C4: å‘é€æŠ•æ ‡ (Propose)...");
                    createMessageLine(agents[0], manager, '#60a5fa'); // blue-400
                    createMessageLine(agents[2], manager, '#60a5fa');
                    createMessageLine(agents[3], manager, '#60a5fa');
                    logMessage("C2, C5: æ‹’ç»æŠ•æ ‡ (Refuse)...");
                }, 1000);
            },
            () => { // Step 3: Award contract
                logMessage("ç®¡ç†è€… M: æ”¶åˆ°æŠ•æ ‡, é€‰æ‹©C3ä¸ºæœ€ä½³ä¸­æ ‡è€…...");
                setTimeout(() => {
                     logMessage("ç®¡ç†è€… M: å‘C3æˆäºˆåˆåŒ (Accept-Proposal)...");
                     createMessageLine(manager, agents[2], '#34d399'); // emerald-400
                     logMessage("ç®¡ç†è€… M: æ‹’ç»å…¶ä»–æŠ•æ ‡ (Reject-Proposal)...");
                     createMessageLine(manager, agents[0], '#fbbf24'); // amber-400
                     createMessageLine(manager, agents[3], '#fbbf24'); // amber-400
                }, 1000);
            },
            () => { // Step 4: Execution & Result
                 logMessage("ä¸­æ ‡è€… C3: å¼€å§‹æ‰§è¡Œä»»åŠ¡...");
                 agents[2].el.classList.add('animate-bounce');
                 setTimeout(() => {
                     agents[2].el.classList.remove('animate-bounce');
                     logMessage("ä¸­æ ‡è€… C3: ä»»åŠ¡å®Œæˆ, å‘é€ç»“æœ (Inform)...");
                     createMessageLine(agents[2], manager, '#a78bfa'); // violet-400
                 }, 2000);
            },
             () => {
                 logMessage("æ¼”ç¤ºç»“æŸã€‚");
                 this.clearTimers();
             }
        ];

        this.data.timers.mas = setInterval(() => {
            if(step < sequence.length) {
                sequence[step]();
                step++;
            }
        }, 3000);
    }
};

document.addEventListener('DOMContentLoaded', () => App.init());
</script>

</body>
</html>
