<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‡ªåŠ¨æ§åˆ¶åŸç†äº¤äº’å¼å­¦ä¹ åº”ç”¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Harmony (Beige, Slate, Terracotta, Sage) -->
    <!-- Application Structure Plan: æœ¬åº”ç”¨é‡‡ç”¨éçº¿æ€§çš„ã€ä»¥äº¤äº’æ¨¡å—ä¸ºæ ¸å¿ƒçš„ä»ªè¡¨ç›˜å¼å¸ƒå±€ï¼Œè€ŒéæŠ¥å‘Šå¼çš„çº¿æ€§ç»“æ„ã€‚é¡¶éƒ¨å¯¼èˆªæ æŒ‰â€œå¯¼è®ºâ€ã€â€œç»å…¸ç†è®ºâ€ã€â€œç°ä»£ç†è®ºâ€å’Œâ€œæ ¸å¿ƒæ¦‚å¿µâ€å››å¤§ä¸»é¢˜åˆ’åˆ†ï¼Œå…è®¸ç”¨æˆ·è‡ªç”±æ¢ç´¢ã€‚æ­¤ç»“æ„æ—¨åœ¨å°†æŠ½è±¡ã€å¯†é›†çš„ç†è®ºçŸ¥è¯†åˆ†è§£ä¸ºæ˜“äºæ¶ˆåŒ–çš„ã€å¯åŠ¨æ‰‹æ“ä½œçš„å­¦ä¹ å•å…ƒï¼Œç‰¹åˆ«æ˜¯â€œæ ¸å¿ƒæ¦‚å¿µâ€åŒºåŸŸçš„äº¤äº’å¼å›¾è¡¨ï¼Œä½¿ç”¨æˆ·èƒ½é€šè¿‡è°ƒæ•´å‚æ•°ç›´è§‚æ„Ÿå—ç†è®ºæ•ˆæœï¼Œæå¤§åœ°æå‡äº†å­¦ä¹ ä½“éªŒå’Œå¯¹å¤æ‚æ¦‚å¿µçš„ç†è§£æ·±åº¦ï¼Œè§£å†³äº†çº¯æ–‡æœ¬å­¦ä¹ æ¯ç‡¥ä¸”éš¾ä»¥ç†è§£çš„ç—›ç‚¹ã€‚ -->
    <!-- Visualization & Content Choices:
        1. äºŒé˜¶ç³»ç»Ÿæ—¶åŸŸå“åº”: ç›®æ ‡(æ¢ç´¢å˜åŒ–) -> Chart.jsçº¿å›¾ + æ»‘å—(äº¤äº’) -> å®æ—¶å±•ç¤ºé˜»å°¼æ¯”(Î¶)å’Œè‡ªç„¶é¢‘ç‡(Ï‰n)å¯¹ç³»ç»ŸåŠ¨æ€æ€§èƒ½ï¼ˆè¶…è°ƒé‡ã€è°ƒèŠ‚æ—¶é—´ï¼‰çš„ç›´è§‚å½±å“ã€‚ç†ç”±ï¼šè¿™æ˜¯æ—¶åŸŸåˆ†ææœ€æ ¸å¿ƒã€æœ€åŸºç¡€çš„æ¦‚å¿µï¼Œäº¤äº’å¯è§†åŒ–æ˜¯æœ€ä½³å­¦ä¹ æ–¹å¼ã€‚
        2. æ ¹è½¨è¿¹åˆ†æ: ç›®æ ‡(æ¢ç´¢å…³ç³») -> HTML5 Canvasç»˜å›¾ + æ»‘å—(äº¤äº’) -> åŠ¨æ€å±•ç¤ºå¼€ç¯å¢ç›ŠKå˜åŒ–æ—¶ï¼Œé—­ç¯æç‚¹åœ¨så¹³é¢ä¸Šçš„ç§»åŠ¨è½¨è¿¹ã€‚ç†ç”±ï¼šå°†æ ¹è½¨è¿¹ä»é™æ€å›¾å½¢å˜ä¸ºåŠ¨æ€è¿‡ç¨‹ï¼Œæ¸…æ™°æ­ç¤ºå¢ç›Šä¸ç¨³å®šæ€§å’Œå“åº”æ¨¡å¼çš„å…³ç³»ã€‚
        3. é¢‘åŸŸåˆ†æBodeå›¾: ç›®æ ‡(æ¯”è¾ƒä¸åˆ†æ) -> Chart.jsçº¿å›¾ + æ»‘å—(äº¤äº’) -> é€šè¿‡è°ƒæ•´å¢ç›ŠKï¼Œè§‚å¯ŸBodeå›¾å¹…é¢‘ç‰¹æ€§çš„ä¸Šä¸‹å¹³ç§»ï¼Œå¹¶å®æ—¶è®¡ç®—å’Œæ˜¾ç¤ºç›¸ä½/å¢ç›Šè£•åº¦ã€‚ç†ç”±ï¼šç›´è§‚é˜é‡Šé¢‘åŸŸç¨³å®šè£•åº¦çš„æ¦‚å¿µï¼Œæ˜¯æ§åˆ¶å™¨æ ¡æ­£çš„åŸºç¡€ã€‚
        4. PIDæ§åˆ¶å™¨è°ƒè°: ç›®æ ‡(æ¢ç´¢ä¸ä¼˜åŒ–) -> Chart.jsçº¿å›¾ + æ»‘å—(äº¤äº’) -> å…è®¸ç”¨æˆ·åˆ†åˆ«è°ƒæ•´P, I, Dä¸‰ä¸ªå‚æ•°ï¼Œå®æ—¶è§‚å¯Ÿç³»ç»Ÿå“åº”æ›²çº¿çš„å˜åŒ–ã€‚ç†ç”±ï¼šæä¾›äº†ä¸€ä¸ªPIDå‚æ•°æ•´å®šçš„è™šæ‹Ÿå®éªŒå®¤ï¼Œå°†ç†è®ºä¸å®è·µç´§å¯†ç»“åˆã€‚
        æ‰€æœ‰å¯è§†åŒ–å‡æœªä½¿ç”¨SVGæˆ–Mermaidã€‚ -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #fdfbf7;
            color: #3d405b;
        }
        .nav-btn {
            @apply px-4 py-2 rounded-lg transition-colors duration-300;
        }
        .nav-btn.active {
            @apply bg-[#e07a5f] text-white shadow-md;
        }
        .nav-btn:not(.active) {
            @apply hover:bg-[#f2cc8f] hover:text-[#3d405b];
        }
        .content-section {
            @apply hidden;
        }
        .content-section.active {
            @apply block;
        }
        .card {
            @apply bg-white/80 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-gray-200/50 transition-all duration-300 hover:shadow-2xl hover:-translate-y-1;
        }
        .slider-label {
            @apply w-32 text-right pr-4;
        }
        .slider-value {
            @apply w-20 text-left font-semibold text-[#e07a5f];
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            height: 320px;
            max-height: 40vh;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        input[type=range] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 8px;
            background: #f2cc8f;
            border-radius: 5px;
            outline: none;
            opacity: 0.7;
            transition: opacity .2s;
        }
        input[type=range]:hover {
            opacity: 1;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #e07a5f;
            cursor: pointer;
            border-radius: 50%;
        }
        input[type=range]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #e07a5f;
            cursor: pointer;
            border-radius: 50%;
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto px-4 py-8">

        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-[#3d405b]">è‡ªåŠ¨æ§åˆ¶åŸç†</h1>
            <p class="mt-2 text-lg text-gray-500">ä¸€ä¸ªäº¤äº’å¼å­¦ä¹ æ¢ç´¢å¹³å°</p>
        </header>

        <nav class="flex flex-wrap justify-center gap-2 md:gap-4 mb-10 p-2 bg-white/60 backdrop-blur-sm rounded-xl shadow-sm sticky top-4 z-10">
            <button class="nav-btn active" data-target="intro">å¯¼è®º</button>
            <button class="nav-btn" data-target="concepts">æ ¸å¿ƒæ¦‚å¿µäº¤äº’</button>
            <button class="nav-btn" data-target="classical">ç»å…¸æ§åˆ¶ç†è®º</button>
            <button class="nav-btn" data-target="modern">ç°ä»£æ§åˆ¶ç†è®º</button>
        </nav>

        <main>
            <section id="intro" class="content-section active">
                <div class="space-y-8">
                    <div class="card">
                        <h2 class="text-2xl font-bold mb-4 text-[#81b29a]">ä»€ä¹ˆæ˜¯è‡ªåŠ¨æ§åˆ¶ï¼Ÿ</h2>
                        <p class="text-gray-700 leading-relaxed">è‡ªåŠ¨æ§åˆ¶æ˜¯æŒ‡åœ¨æ²¡æœ‰äººç›´æ¥å‚ä¸çš„æƒ…å†µä¸‹ï¼Œåˆ©ç”¨æ§åˆ¶è£…ç½®ä½¿ç”Ÿäº§è¿‡ç¨‹æˆ–è¢«æ§å¯¹è±¡çš„æŸäº›ç‰©ç†é‡ï¼ˆè¢«æ§é‡ï¼‰è‡ªåŠ¨åœ°æŒ‰ç…§é¢„å®šçš„è§„å¾‹è¿è¡Œã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡**åé¦ˆ**æœºåˆ¶ï¼Œä¸æ–­åœ°æµ‹é‡å®é™…å€¼ä¸æœŸæœ›å€¼çš„åå·®ï¼Œå¹¶æ ¹æ®åå·®æ¥è°ƒæ•´æ§åˆ¶ä½œç”¨ï¼Œä»è€ŒæŠµæŠ—æ‰°åŠ¨ï¼Œå®ç°ç²¾ç¡®æ§åˆ¶ã€‚ä»»ä½•æ§åˆ¶ç³»ç»Ÿçš„å­˜åœ¨ï¼Œéƒ½æ˜¯ä¸ºäº†å®ç°ä¸€ä¸ªé¢„è®¾çš„ç›®æ ‡ã€‚</p>
                    </div>

                    <div class="card">
                        <h2 class="text-2xl font-bold mb-4 text-[#81b29a]">å¯¹æ§åˆ¶ç³»ç»Ÿçš„åŸºæœ¬è¦æ±‚ï¼šç¨³ã€å‡†ã€å¿«</h2>
                        <div class="grid md:grid-cols-3 gap-6 text-center">
                            <div>
                                <div class="text-5xl mb-2">âš–ï¸</div>
                                <h3 class="font-semibold text-lg">ç¨³å®šæ€§ (Stability)</h3>
                                <p class="text-sm text-gray-600">ç³»ç»Ÿèƒ½æ­£å¸¸å·¥ä½œçš„é¦–è¦å‰æã€‚æŒ‡ç³»ç»Ÿåœ¨æ‰°åŠ¨æ¶ˆå¤±åï¼Œèƒ½æ¢å¤åˆ°åŸå¹³è¡¡çŠ¶æ€çš„èƒ½åŠ›ã€‚ä¸ç¨³å®šçš„ç³»ç»Ÿæ˜¯æ— ç”¨çš„ã€‚</p>
                            </div>
                            <div>
                                <div class="text-5xl mb-2">ğŸ¯</div>
                                <h3 class="font-semibold text-lg">å‡†ç¡®æ€§ (Accuracy)</h3>
                                <p class="text-sm text-gray-600">æŒ‡ç³»ç»Ÿç¨³æ€è¾“å‡ºå€¼ä¸æœŸæœ›å€¼çš„æ¥è¿‘ç¨‹åº¦ï¼Œé€šå¸¸ç”¨ç¨³æ€è¯¯å·®æ¥è¡¡é‡ã€‚ç²¾åº¦æ˜¯æ§åˆ¶è´¨é‡çš„å…³é”®æŒ‡æ ‡ã€‚</p>
                            </div>
                            <div>
                                <div class="text-5xl mb-2">âš¡ï¸</div>
                                <h3 class="font-semibold text-lg">å¿«é€Ÿæ€§ (Rapidity)</h3>
                                <p class="text-sm text-gray-600">æŒ‡ç³»ç»Ÿå“åº”çš„è¿…é€Ÿç¨‹åº¦ï¼Œå³è¿‡æ¸¡è¿‡ç¨‹æ—¶é—´çš„é•¿çŸ­ã€‚å¿«é€Ÿæ€§å†³å®šäº†ç³»ç»Ÿçš„åŠ¨æ€å“åº”æ•ˆç‡ã€‚</p>
                            </div>
                        </div>
                    </div>
                     <div class="card">
                        <h2 class="text-2xl font-bold mb-4 text-[#81b29a]">å‘å±•ç®€å²</h2>
                        <div class="relative pl-6 border-l-2 border-[#f2cc8f]">
                            <div class="mb-8">
                                <div class="absolute w-4 h-4 bg-[#e07a5f] rounded-full -left-2 mt-1"></div>
                                <p class="font-bold">1788å¹´</p>
                                <p class="text-sm text-gray-600">ç“¦ç‰¹å°†ç¦»å¿ƒå¼è°ƒé€Ÿå™¨ç”¨äºè’¸æ±½æœºï¼Œæ ‡å¿—ç€åé¦ˆæ§åˆ¶çš„å¤§è§„æ¨¡åº”ç”¨å¼€å¯ã€‚</p>
                            </div>
                            <div class="mb-8">
                                <div class="absolute w-4 h-4 bg-[#e07a5f] rounded-full -left-2 mt-1"></div>
                                <p class="font-bold">1877å¹´</p>
                                <p class="text-sm text-gray-600">éº¦å…‹æ–¯éŸ¦ã€åŠ³æ–¯ç­‰äººé¦–æ¬¡ç”¨æ•°å­¦æ–¹æ³•åˆ†æç¨³å®šæ€§ï¼Œæ§åˆ¶ç†è®ºç§‘å­¦åŒ–ã€‚</p>
                            </div>
                             <div class="mb-8">
                                <div class="absolute w-4 h-4 bg-[#e07a5f] rounded-full -left-2 mt-1"></div>
                                <p class="font-bold">1932å¹´</p>
                                <p class="text-sm text-gray-600">å¥ˆå¥æ–¯ç‰¹æå‡ºé¢‘ç‡æ³•ç¨³å®šåˆ¤æ®ï¼Œå¥ å®šäº†ç»å…¸æ§åˆ¶ç†è®ºé¢‘åŸŸåˆ†æçš„åŸºç¡€ã€‚</p>
                            </div>
                            <div class="mb-8">
                                <div class="absolute w-4 h-4 bg-[#e07a5f] rounded-full -left-2 mt-1"></div>
                                <p class="font-bold">20ä¸–çºª50-60å¹´ä»£</p>
                                <p class="text-sm text-gray-600">ä¸ºæ»¡è¶³èˆªå¤©éœ€æ±‚ï¼ŒçŠ¶æ€ç©ºé—´æ³•ã€æœ€ä¼˜æ§åˆ¶ã€å¡å°”æ›¼æ»¤æ³¢ç­‰ç°ä»£æ§åˆ¶ç†è®ºè¯ç”Ÿã€‚</p>
                            </div>
                             <div>
                                <div class="absolute w-4 h-4 bg-[#e07a5f] rounded-full -left-2 mt-1"></div>
                                <p class="font-bold">è‡³ä»Š</p>
                                <p class="text-sm text-gray-600">ä¸AIã€å¤§æ•°æ®ç­‰æŠ€æœ¯æ·±åº¦èåˆï¼Œå‘æ•°æ®é©±åŠ¨ã€æ™ºèƒ½è‡ªä¸»æ§åˆ¶æ–¹å‘å‘å±•ã€‚</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="concepts" class="content-section">
                <div class="space-y-8">
                    <div class="card">
                        <h2 class="text-2xl font-bold mb-2">äºŒé˜¶ç³»ç»Ÿæ—¶åŸŸå“åº”åˆ†æ</h2>
                        <p class="text-gray-600 mb-4 text-sm">äºŒé˜¶ç³»ç»Ÿæ˜¯æ§åˆ¶ç³»ç»Ÿåˆ†æçš„åŸºç¡€ã€‚å…¶åŠ¨æ€ç‰¹æ€§ç”±é˜»å°¼æ¯”(Î¶)å’Œæ— é˜»å°¼è‡ªç„¶æŒ¯è¡é¢‘ç‡(Ï‰n)å…±åŒå†³å®šã€‚æ‹–åŠ¨ä¸‹æ–¹æ»‘å—ï¼Œè§‚å¯Ÿç³»ç»Ÿå•ä½é˜¶è·ƒå“åº”æ›²çº¿çš„å˜åŒ–ï¼Œç›´è§‚æ„Ÿå—å®ƒä»¬å¯¹â€œå¿«â€å’Œâ€œç¨³â€çš„å½±å“ã€‚</p>
                        <div class="chart-container mb-4">
                            <canvas id="stepResponseChart"></canvas>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                             <div>
                                <div class="flex items-center mb-2">
                                    <label for="zetaSlider" class="slider-label">é˜»å°¼æ¯” Î¶:</label>
                                    <input type="range" id="zetaSlider" min="0" max="2" step="0.01" value="0.5" class="flex-grow">
                                    <span id="zetaValue" class="slider-value">0.50</span>
                                </div>
                                <div class="flex items-center">
                                    <label for="omegaNSlider" class="slider-label">è‡ªç„¶é¢‘ç‡ Ï‰n:</label>
                                    <input type="range" id="omegaNSlider" min="1" max="10" step="0.1" value="3" class="flex-grow">
                                    <span id="omegaNValue" class="slider-value">3.0</span>
                                </div>
                            </div>
                            <div class="bg-gray-50 p-4 rounded-lg text-sm">
                                <h4 class="font-semibold mb-2">æ€§èƒ½æŒ‡æ ‡:</h4>
                                <p>è¶…è°ƒé‡ (Ïƒ%): <span id="overshootValue" class="font-mono font-semibold">16.30%</span></p>
                                <p>å³°å€¼æ—¶é—´ (tp): <span id="peakTimeValue" class="font-mono font-semibold">1.21 s</span></p>
                                <p>è°ƒèŠ‚æ—¶é—´ (ts, 2%): <span id="settlingTimeValue" class="font-mono font-semibold">2.67 s</span></p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h2 class="text-2xl font-bold mb-2">æ ¹è½¨è¿¹åˆ†æ</h2>
                        <p class="text-gray-600 mb-4 text-sm">æ ¹è½¨è¿¹æ³•å±•ç¤ºäº†å½“å¼€ç¯å¢ç›ŠKä»0å˜åŒ–åˆ°âˆæ—¶ï¼Œé—­ç¯ç³»ç»Ÿæç‚¹åœ¨så¹³é¢ä¸Šçš„è¿åŠ¨è½¨è¿¹ã€‚æç‚¹çš„ä½ç½®å†³å®šäº†ç³»ç»Ÿçš„ç¨³å®šæ€§ä¸åŠ¨æ€æ€§èƒ½ã€‚æ‹–åŠ¨æ»‘å—æ”¹å˜å¢ç›ŠKï¼Œè§‚å¯Ÿé—­ç¯æç‚¹ï¼ˆçº¢è‰²åœ†ç‚¹ï¼‰çš„ç§»åŠ¨ã€‚</p>
                         <div class="chart-container mb-4 bg-white rounded-lg shadow-inner">
                            <canvas id="rootLocusCanvas"></canvas>
                        </div>
                        <div class="flex items-center">
                            <label for="kSlider" class="slider-label">å¼€ç¯å¢ç›Š K:</label>
                            <input type="range" id="kSlider" min="0" max="150" step="0.1" value="20" class="flex-grow">
                            <span id="kValue" class="slider-value">20.0</span>
                        </div>
                        <p class="text-xs text-gray-500 mt-2 text-center">ç¤ºä¾‹ç³»ç»Ÿå¼€ç¯ä¼ é€’å‡½æ•°: G(s) = K / (s(s+2)(s+5))ã€‚è“è‰²'x'ä¸ºå¼€ç¯æç‚¹ã€‚</p>
                    </div>
                </div>
            </section>

            <section id="classical" class="content-section">
                <div class="space-y-8">
                     <div class="card">
                        <h2 class="text-2xl font-bold mb-2">é¢‘åŸŸåˆ†æä¸ç¨³å®šè£•åº¦</h2>
                        <p class="text-gray-600 mb-4 text-sm">é¢‘åŸŸåˆ†ææ³•é€šè¿‡ç ”ç©¶ç³»ç»Ÿå¯¹æ­£å¼¦ä¿¡å·çš„å“åº”ï¼ˆé¢‘ç‡ç‰¹æ€§ï¼‰æ¥åˆ¤æ–­ç¨³å®šæ€§ã€‚Bodeå›¾æ˜¯å…¶ä¸»è¦å·¥å…·ã€‚ç›¸ä½è£•åº¦(PM)å’Œå¢ç›Šè£•åº¦(GM)æ˜¯è¡¡é‡ç³»ç»Ÿç›¸å¯¹ç¨³å®šæ€§çš„é‡è¦æŒ‡æ ‡ã€‚è°ƒæ•´å¢ç›ŠKï¼Œè§‚å¯ŸBodeå›¾å’Œç¨³å®šè£•åº¦çš„å˜åŒ–ã€‚</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                             <div class="chart-container"><canvas id="bodeMagChart"></canvas></div>
                             <div class="chart-container"><canvas id="bodePhaseChart"></canvas></div>
                        </div>
                         <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                             <div>
                                <div class="flex items-center">
                                    <label for="bodeKSlider" class="slider-label">å¼€ç¯å¢ç›Š K:</label>
                                    <input type="range" id="bodeKSlider" min="1" max="100" step="1" value="10" class="flex-grow">
                                    <span id="bodeKValue" class="slider-value">10</span>
                                </div>
                                <p class="text-xs text-gray-500 mt-2">ç¤ºä¾‹ç³»ç»Ÿ G(s) = K / (s(0.5s+1)(0.1s+1))</p>
                            </div>
                            <div class="bg-gray-50 p-4 rounded-lg text-sm">
                                <h4 class="font-semibold mb-2">ç¨³å®šè£•åº¦:</h4>
                                <p>ç›¸ä½è£•åº¦ (PM): <span id="pmValue" class="font-mono font-semibold">...</span></p>
                                <p>å¢ç›Šè£•åº¦ (GM): <span id="gmValue" class="font-mono font-semibold">...</span></p>
                                <p>çŠ¶æ€: <span id="stabilityStatus" class="font-mono font-semibold">...</span></p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h2 class="text-2xl font-bold mb-2">PIDæ§åˆ¶å™¨å‚æ•°æ•´å®š</h2>
                        <p class="text-gray-600 mb-4 text-sm">PIDæ§åˆ¶å™¨æ˜¯å·¥ä¸šåº”ç”¨æœ€å¹¿æ³›çš„æ§åˆ¶å™¨ã€‚å®ƒé€šè¿‡æ¯”ä¾‹(P)ã€ç§¯åˆ†(I)ã€å¾®åˆ†(D)ä¸‰ä¸ªç¯èŠ‚çš„ç»„åˆä½œç”¨å®ç°ç²¾ç¡®æ§åˆ¶ã€‚è°ƒæ•´Kp, Ki, Kdå‚æ•°ï¼Œä½“éªŒâ€œPIDè°ƒå‚å·¥ç¨‹å¸ˆâ€çš„å·¥ä½œï¼Œè§‚å¯Ÿå®ƒä»¬å¦‚ä½•å…±åŒå½±å“ç³»ç»Ÿå“åº”ã€‚</p>
                        <div class="chart-container mb-4">
                            <canvas id="pidChart"></canvas>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                             <div>
                                <div class="flex items-center mb-1">
                                    <label for="pSlider" class="w-10">Kp:</label>
                                    <input type="range" id="pSlider" min="0" max="100" step="1" value="30" class="flex-grow">
                                    <span id="pValue" class="w-12 text-center">30</span>
                                </div>
                                <p class="text-xs text-gray-500 pl-10">æ¯”ä¾‹ï¼šå³æ—¶å“åº”å½“å‰è¯¯å·®</p>
                             </div>
                            <div>
                                <div class="flex items-center mb-1">
                                    <label for="iSlider" class="w-10">Ki:</label>
                                    <input type="range" id="iSlider" min="0" max="100" step="1" value="20" class="flex-grow">
                                    <span id="iValue" class="w-12 text-center">20</span>
                                </div>
                                <p class="text-xs text-gray-500 pl-10">ç§¯åˆ†ï¼šæ¶ˆé™¤å†å²ç´¯ç§¯çš„ç¨³æ€è¯¯å·®</p>
                             </div>
                             <div>
                                <div class="flex items-center mb-1">
                                    <label for="dSlider" class="w-10">Kd:</label>
                                    <input type="range" id="dSlider" min="0" max="20" step="0.5" value="5" class="flex-grow">
                                    <span id="dValue" class="w-12 text-center">5.0</span>
                                </div>
                                <p class="text-xs text-gray-500 pl-10">å¾®åˆ†ï¼šé¢„æµ‹æœªæ¥è¯¯å·®ï¼ŒæŠ‘åˆ¶è¶…è°ƒ</p>
                             </div>
                        </div>
                         <p class="text-xs text-gray-500 mt-2 text-center">è¢«æ§å¯¹è±¡: G(s) = 1 / (s^2 + s + 1)</p>
                    </div>
                </div>
            </section>

            <section id="modern" class="content-section">
                 <div class="card">
                    <h2 class="text-2xl font-bold mb-4 text-[#81b29a]">ç°ä»£æ§åˆ¶ç†è®ºï¼šçŠ¶æ€ç©ºé—´æ³•</h2>
                    <div class="grid md:grid-cols-2 gap-8">
                        <div>
                            <h3 class="text-xl font-semibold mb-2">æ ¸å¿ƒæ€æƒ³</h3>
                            <p class="text-gray-700 leading-relaxed mb-4">ç»å…¸æ§åˆ¶ç†è®ºä½¿ç”¨ä¼ é€’å‡½æ•°ï¼Œå…³æ³¨ç³»ç»Ÿçš„è¾“å…¥-è¾“å‡ºå…³ç³»ï¼Œåƒä¸€ä¸ªâ€œé»‘ç›’å­â€ã€‚è€Œç°ä»£æ§åˆ¶ç†è®ºä½¿ç”¨**çŠ¶æ€ç©ºé—´æ³•**ï¼Œæ·±å…¥ç³»ç»Ÿå†…éƒ¨ï¼Œç”¨ä¸€ç»„â€œçŠ¶æ€å˜é‡â€æ¥å®Œæ•´æè¿°ç³»ç»Ÿçš„å†…éƒ¨åŠ¨æ€ã€‚è¿™ä½¿å…¶èƒ½å¤„ç†æ›´å¤æ‚çš„å¤šè¾“å…¥å¤šè¾“å‡º(MIMO)ã€éçº¿æ€§ç³»ç»Ÿã€‚</p>
                            <div class="bg-gray-100 p-4 rounded-lg font-mono text-sm">
                                <p><span class="font-bold">çŠ¶æ€æ–¹ç¨‹:</span> &#x1E8B;&#x0307; = A&#x1E8B; + Bu</p>
                                <p><span class="font-bold">è¾“å‡ºæ–¹ç¨‹:</span> y = C&#x1E8B; + Du</p>
                            </div>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold mb-2">ä¸¤ä¸ªåŸºæœ¬é—®é¢˜</h3>
                             <div class="space-y-4">
                                <div>
                                    <h4 class="font-bold text-lg">èƒ½æ§æ€§ (Controllability)</h4>
                                    <p class="text-gray-600">æˆ‘ä»¬èƒ½é€šè¿‡è¾“å…¥uï¼Œåœ¨æœ‰é™æ—¶é—´å†…å°†ç³»ç»ŸçŠ¶æ€&#x1E8B;é©±åŠ¨åˆ°ä»»æ„æœŸæœ›çš„ä½ç½®å—ï¼Ÿå¦‚æœèƒ½ï¼Œç³»ç»Ÿå°±æ˜¯èƒ½æ§çš„ã€‚è¿™æ˜¯è®¾è®¡æœ‰æ•ˆæ§åˆ¶å™¨çš„å‰æã€‚</p>
                                </div>
                                <div>
                                    <h4 class="font-bold text-lg">èƒ½è§‚æ€§ (Observability)</h4>
                                    <p class="text-gray-600">æˆ‘ä»¬èƒ½ä»…é€šè¿‡è§‚æµ‹è¾“å‡ºyï¼Œæ¥ç¡®å®šç³»ç»Ÿå†…éƒ¨çš„åˆå§‹çŠ¶æ€&#x1E8B;(0)å—ï¼Ÿå¦‚æœèƒ½ï¼Œç³»ç»Ÿå°±æ˜¯èƒ½è§‚çš„ã€‚è¿™æ˜¯è®¾è®¡çŠ¶æ€è§‚æµ‹å™¨çš„å‰æã€‚</p>
                                </div>
                            </div>
                        </div>
                    </div>
                     <div class="mt-6 border-t pt-6">
                         <h3 class="text-xl font-semibold mb-2">è®¾è®¡æ€æƒ³ï¼šæç‚¹é…ç½®</h3>
                         <p class="text-gray-700 leading-relaxed">ç°ä»£æ§åˆ¶ç†è®ºæœ€å¼ºå¤§çš„æ€æƒ³ä¹‹ä¸€æ˜¯**æç‚¹é…ç½®**ã€‚å¦‚æœä¸€ä¸ªç³»ç»Ÿæ˜¯èƒ½æ§çš„ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡**çŠ¶æ€åé¦ˆ** (u = -Kx) çš„æ–¹å¼ï¼Œä»»æ„åœ°é…ç½®é—­ç¯ç³»ç»Ÿçš„æç‚¹ï¼Œä»è€Œä¸»åŠ¨åœ°ã€ç²¾ç¡®åœ°è®¾è®¡å‡ºæˆ‘ä»¬æƒ³è¦çš„ç³»ç»ŸåŠ¨æ€æ€§èƒ½ï¼ˆå¦‚å“åº”é€Ÿåº¦ã€è¶…è°ƒç­‰ï¼‰ï¼Œè€Œä¸æ˜¯åƒç»å…¸ç†è®ºé‚£æ ·è¿›è¡Œâ€œè¯•å‡‘â€å¼çš„æ ¡æ­£ã€‚</p>
                     </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const navButtons = document.querySelectorAll('.nav-btn');
            const contentSections = document.querySelectorAll('.content-section');

            navButtons.forEach(button => {
                button.addEventListener('click', () => {
                    navButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');

                    const targetId = button.getAttribute('data-target');
                    contentSections.forEach(section => {
                        if (section.id === targetId) {
                            section.classList.add('active');
                        } else {
                            section.classList.remove('active');
                        }
                    });
                });
            });

            // --- Interactive Module 1: Step Response ---
            const zetaSlider = document.getElementById('zetaSlider');
            const omegaNSlider = document.getElementById('omegaNSlider');
            const zetaValueSpan = document.getElementById('zetaValue');
            const omegaNValueSpan = document.getElementById('omegaNValue');
            const overshootValueSpan = document.getElementById('overshootValue');
            const peakTimeValueSpan = document.getElementById('peakTimeValue');
            const settlingTimeValueSpan = document.getElementById('settlingTimeValue');

            const stepResponseCtx = document.getElementById('stepResponseChart').getContext('2d');
            let stepResponseChart = new Chart(stepResponseCtx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'å•ä½é˜¶è·ƒå“åº”',
                        data: [],
                        borderColor: '#e07a5f',
                        borderWidth: 2,
                        fill: false,
                        tension: 0.1,
                        pointRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: { display: true, text: 'æ—¶é—´ (s)' }
                        },
                        y: {
                            title: { display: true, text: 'å¹…å€¼' },
                            min: 0,
                            max: 2.0
                        }
                    },
                    plugins: {
                        legend: { display: false }
                    }
                }
            });

            function updateStepResponse() {
                const zeta = parseFloat(zetaSlider.value);
                const omega_n = parseFloat(omegaNSlider.value);
                zetaValueSpan.textContent = zeta.toFixed(2);
                omegaNValueSpan.textContent = omega_n.toFixed(1);

                const dt = 0.02;
                const time = Array.from({ length: 401 }, (_, i) => i * dt);
                let responseData;
                let overshoot = 0, peakTime = 'N/A', settlingTime = 'N/A';

                if (zeta < 1) { // Underdamped
                    const omega_d = omega_n * Math.sqrt(1 - zeta * zeta);
                    responseData = time.map(t => 1 - Math.exp(-zeta * omega_n * t) * (Math.cos(omega_d * t) + zeta / Math.sqrt(1 - zeta * zeta) * Math.sin(omega_d * t)));
                    overshoot = Math.exp(-Math.PI * zeta / Math.sqrt(1 - zeta * zeta)) * 100;
                    peakTime = Math.PI / omega_d;
                    settlingTime = 4 / (zeta * omega_n);
                } else if (zeta === 1) { // Critically damped
                    responseData = time.map(t => 1 - (1 + omega_n * t) * Math.exp(-omega_n * t));
                    overshoot = 0;
                    peakTime = 'N/A';
                    settlingTime = 5.83 / omega_n;
                } else { // Overdamped
                    const s1 = -zeta * omega_n + omega_n * Math.sqrt(zeta * zeta - 1);
                    const s2 = -zeta * omega_n - omega_n * Math.sqrt(zeta * zeta - 1);
                    responseData = time.map(t => 1 + (s1 * Math.exp(s2 * t) - s2 * Math.exp(s1 * t)) / (s2 - s1));
                    overshoot = 0;
                    peakTime = 'N/A';
                    settlingTime = '...';
                }

                overshootValueSpan.textContent = `${overshoot.toFixed(2)}%`;
                peakTimeValueSpan.textContent = typeof peakTime === 'number' ? `${peakTime.toFixed(2)} s` : peakTime;
                settlingTimeValueSpan.textContent = typeof settlingTime === 'number' ? `${settlingTime.toFixed(2)} s` : settlingTime;

                stepResponseChart.data.labels = time;
                stepResponseChart.data.datasets[0].data = responseData;
                stepResponseChart.update();
            }

            zetaSlider.addEventListener('input', updateStepResponse);
            omegaNSlider.addEventListener('input', updateStepResponse);
            updateStepResponse();

            // --- Interactive Module 2: Root Locus ---
            const kSlider = document.getElementById('kSlider');
            const kValueSpan = document.getElementById('kValue');
            const rlCanvas = document.getElementById('rootLocusCanvas');
            const rlCtx = rlCanvas.getContext('2d');

            function drawRootLocus() {
                const w = rlCanvas.width = rlCanvas.clientWidth;
                const h = rlCanvas.height = rlCanvas.clientHeight;
                rlCtx.clearRect(0, 0, w, h);

                const centerX = w * 0.7;
                const centerY = h / 2;
                const scale = w / 12;

                // Draw axes
                rlCtx.beginPath();
                rlCtx.moveTo(0, centerY);
                rlCtx.lineTo(w, centerY);
                rlCtx.moveTo(centerX, 0);
                rlCtx.lineTo(centerX, h);
                rlCtx.strokeStyle = '#ddd';
                rlCtx.stroke();

                // Draw open-loop poles
                const poles = [0, -2, -5];
                rlCtx.fillStyle = '#3b82f6';
                rlCtx.font = '20px sans-serif';
                poles.forEach(p => {
                    const x = centerX + p * scale;
                    rlCtx.fillText('Ã—', x - 6, centerY + 6);
                });

                // Draw root locus paths (approximated for this visualization)
                rlCtx.beginPath();
                rlCtx.moveTo(centerX, centerY);
                rlCtx.lineTo(centerX - 2 * scale, centerY);
                rlCtx.strokeStyle = '#81b29a';
                rlCtx.lineWidth = 2;
                rlCtx.stroke();

                rlCtx.beginPath();
                rlCtx.moveTo(centerX - 5 * scale, centerY);
                rlCtx.lineTo(w, centerY);
                rlCtx.stroke();

                const separationPoint = -0.88;
                rlCtx.beginPath();
                rlCtx.arc(centerX + separationPoint * scale, centerY, 3.5 * scale, Math.PI * 1.05, -Math.PI * 1.05);
                rlCtx.stroke();

                // Draw closed-loop poles
                const k = parseFloat(kSlider.value);
                kValueSpan.textContent = k.toFixed(1);

                // Find roots for a given K. This is a simplified numerical approximation.
                // Roots of s^3 + 7s^2 + 10s + K = 0
                let roots;
                if (k <= 7.4) {
                    let r1 = -0.4;
                    for(let i=0; i<5; i++) r1 = r1 - (r1**3 + 7*r1**2 + 10*r1 + k) / (3*r1**2 + 14*r1 + 10);
                    let r2 = -2.5;
                    for(let i=0; i<5; i++) r2 = r2 - (r2**3 + 7*r2**2 + 10*r2 + k) / (3*r2**2 + 14*r2 + 10);
                    let r3 = -6;
                    for(let i=0; i<5; i++) r3 = r3 - (r3**3 + 7*r3**2 + 10*r3 + k) / (3*r3**2 + 14*r3 + 10);
                    roots = [{re:r1, im:0}, {re:r2, im:0}, {re:r3, im:0}];
                } else if (k <= 140) {
                     let r3 = -6.5;
                     for(let i=0; i<5; i++) r3 = r3 - (r3**3 + 7*r3**2 + 10*r3 + k) / (3*r3**2 + 14*r3 + 10);
                     let p = 7+r3;
                     let q = 10 + 7*r3 + r3**2;
                     let re = -p/2;
                     let im = Math.sqrt(4*q - p**2)/2;
                     roots = [{re:re, im:im}, {re:re, im:-im}, {re:r3, im:0}];
                } else {
                     let r3 = -7;
                     let im = Math.sqrt(k/7 - 10);
                     roots = [{re:0, im:im}, {re:0, im:-im}, {re:r3, im:0}];
                }

                rlCtx.fillStyle = '#e07a5f';
                roots.forEach(root => {
                    rlCtx.beginPath();
                    rlCtx.arc(centerX + root.re * scale, centerY - root.im * scale, 5, 0, 2 * Math.PI);
                    rlCtx.fill();
                });
            }
            kSlider.addEventListener('input', drawRootLocus);
            new ResizeObserver(drawRootLocus).observe(rlCanvas);
            drawRootLocus();

             // --- Interactive Module 3: Bode Plot ---
            const bodeKSlider = document.getElementById('bodeKSlider');
            const bodeKValueSpan = document.getElementById('bodeKValue');
            const pmValueSpan = document.getElementById('pmValue');
            const gmValueSpan = document.getElementById('gmValue');
            const stabilityStatusSpan = document.getElementById('stabilityStatus');
            const bodeMagCtx = document.getElementById('bodeMagChart').getContext('2d');
            const bodePhaseCtx = document.getElementById('bodePhaseChart').getContext('2d');

            const omega = Array.from({length: 300}, (_, i) => Math.pow(10, -1 + 4 * i / 299)); // 0.1 to 1000 rad/s

            let bodeMagChart = new Chart(bodeMagCtx, createBodeChartConfig('å¯¹æ•°å¹…é¢‘ç‰¹æ€§ (dB)', 'é¢‘ç‡ (rad/s)'));
            let bodePhaseChart = new Chart(bodePhaseCtx, createBodeChartConfig('ç›¸é¢‘ç‰¹æ€§ (deg)', 'é¢‘ç‡ (rad/s)'));

            function createBodeChartConfig(title, xLabel) {
                 return {
                    type: 'line',
                    data: { labels: omega, datasets: [] },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: { type: 'logarithmic', title: { display: true, text: xLabel } },
                            y: { title: { display: true, text: title.split(' ')[0] } }
                        },
                        plugins: { legend: { display: false }, title: { display: true, text: title }}
                    }
                };
            }

            function updateBodePlot() {
                const K = parseFloat(bodeKSlider.value);
                bodeKValueSpan.textContent = K;

                const mag = omega.map(w => {
                    const G_jw_mag = K / (w * Math.sqrt(1 + (0.5*w)**2) * Math.sqrt(1 + (0.1*w)**2));
                    return 20 * Math.log10(G_jw_mag);
                });

                const phase = omega.map(w => {
                    const G_jw_phase = -90 - Math.atan(0.5*w)*180/Math.PI - Math.atan(0.1*w)*180/Math.PI;
                    return G_jw_phase;
                });

                bodeMagChart.data.datasets = [{ data: mag, borderColor: '#e07a5f', borderWidth: 2, pointRadius: 0 }];
                bodePhaseChart.data.datasets = [{ data: phase, borderColor: '#3b82f6', borderWidth: 2, pointRadius: 0 }];

                // Find margins
                let w_gc = -1, w_pc = -1, pm = -1, gm_db = -1;

                for(let i = 0; i < omega.length - 1; i++) {
                    if(mag[i] >= 0 && mag[i+1] < 0) {
                        w_gc = omega[i];
                        const phase_at_gc = phase[i];
                        pm = 180 + phase_at_gc;
                    }
                    if(phase[i] >= -180 && phase[i+1] < -180) {
                        w_pc = omega[i];
                        const mag_at_pc = mag[i];
                        gm_db = -mag_at_pc;
                    }
                }

                pmValueSpan.textContent = pm > 0 ? `${pm.toFixed(1)}Â°` : 'N/A';
                gmValueSpan.textContent = gm_db > 0 ? `${gm_db.toFixed(1)} dB` : 'N/A';

                if (pm > 0 && gm_db > 0) {
                    stabilityStatusSpan.textContent = "ç¨³å®š";
                    stabilityStatusSpan.className = 'font-mono font-semibold text-green-600';
                } else {
                    stabilityStatusSpan.textContent = "ä¸ç¨³å®š";
                     stabilityStatusSpan.className = 'font-mono font-semibold text-red-600';
                }

                bodeMagChart.update();
                bodePhaseChart.update();
            }
            bodeKSlider.addEventListener('input', updateBodePlot);
            updateBodePlot();

             // --- Interactive Module 4: PID Controller ---
            const pSlider = document.getElementById('pSlider');
            const iSlider = document.getElementById('iSlider');
            const dSlider = document.getElementById('dSlider');
            const pValueSpan = document.getElementById('pValue');
            const iValueSpan = document.getElementById('iValue');
            const dValueSpan = document.getElementById('dValue');
            const pidCtx = document.getElementById('pidChart').getContext('2d');

            let pidChart = new Chart(pidCtx, {
                type: 'line',
                 data: {
                    labels: [],
                    datasets: [{
                        label: 'ç³»ç»Ÿå“åº”',
                        data: [],
                        borderColor: '#81b29a',
                        borderWidth: 2,
                        fill: false,
                        pointRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { title: { display: true, text: 'æ—¶é—´ (s)' }},
                        y: { title: { display: true, text: 'å¹…å€¼' }, min: 0, max: 2 }
                    },
                    plugins: { legend: { display: false } }
                }
            });

            function updatePIDResponse() {
                const Kp = parseFloat(pSlider.value);
                const Ki = parseFloat(iSlider.value);
                const Kd = parseFloat(dSlider.value);
                pValueSpan.textContent = Kp;
                iValueSpan.textContent = Ki;
                dValueSpan.textContent = Kd.toFixed(1);

                // Simulate G_plant = 1/(s^2+s+1), G_controller = Kp + Ki/s + Kd*s
                // Closed loop T(s) = (Kd*s^2 + Kp*s + Ki) / (s^3 + (1+Kd)s^2 + (1+Kp)s + Ki)
                // This is a 3rd order system. Direct simulation is complex. We use a discrete approximation.
                const dt = 0.05;
                const time = Array.from({ length: 201 }, (_, i) => i * dt);

                let y = 0, y_prev = 0, y_prev2 = 0; // plant output
                let u = 0; // controller output
                let e = 0, e_prev = 0, integral_e = 0;
                const r = 1; // setpoint (step input)

                let responseData = [];

                for (let t of time) {
                    e = r - y;
                    integral_e += e * dt;
                    const derivative_e = (e - e_prev) / dt;
                    u = Kp * e + Ki * integral_e + Kd * derivative_e;
                    e_prev = e;

                    // Plant dynamics: y'' + y' + y = u  => y_k = (2-dt)*y_{k-1} + (dt^2*u - 1)*y_{k-2}
                    // A simpler discrete model for y'' + y' + y = u
                    const y_next = (2 * y - y_prev + dt * (y - y_prev) + dt * dt * u) / (1 + dt);
                    y_prev2 = y_prev;
                    y_prev = y;
                    y = y_next;

                    responseData.push(y);
                }

                pidChart.data.labels = time;
                pidChart.data.datasets[0].data = responseData;
                pidChart.update();
            }

            pSlider.addEventListener('input', updatePIDResponse);
            iSlider.addEventListener('input', updatePIDResponse);
dSlider.addEventListener('input', updatePIDResponse);
            updatePIDResponse();

        });
    </script>
</body>
</html>
